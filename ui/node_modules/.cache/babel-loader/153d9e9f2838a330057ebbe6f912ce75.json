{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js!/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/Workspace.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/Workspace.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBlYXQuanMiOwp2YXIgY2FudmFzOwp2YXIgY3R4Owp2YXIgcHJvdHJhY3RvciA9IG5ldyBJbWFnZSgpOwp2YXIgcnVsZXIgPSBuZXcgSW1hZ2UoKTsKdmFyIHNoYXBlcyA9IFtdOyAvL3RoZSBhZGRlZCBvYmplY3RzIHRvIGNhbnZhcwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJXb3Jrc3BhY2UiLAogIHByb3BzOiB7CiAgICBwcm90cmFjdG9yQWRkZWQ6IEJvb2xlYW4sCiAgICBydWxlckFkZGVkOiBCb29sZWFuCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTZWxlY3RlZDogZmFsc2UsCiAgICAgIHNlbGVjdGVkX2luZGV4OiBudWxsLAogICAgICBzZWxlY3RlZF9vZmZzZXRfeDogMCwKICAgICAgc2VsZWN0ZWRfb2Zmc2V0X3k6IDAsCiAgICAgIHJvdGF0ZU1vZGU6IGZhbHNlLAogICAgICB3b3Jrc3BhY2VfY2FudmFzX2NsaWNrYWJsZTogdHJ1ZSwKICAgICAgcnVsZXJfd2lkdGg6IDgwMCwKICAgICAgcnVsZXJfaGVpZ2h0OiA4MCwKICAgICAgcnVsZXJfdmlkZW9fd2lkdGhfcmF0aW86IDEuNDI4LAogICAgICBydWxlcl9yYXRpbzogMC4xLAogICAgICB2aWRlb19jYW52YXM6IG51bGwKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIGNhbV90eXBlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDYW1lcmE7CiAgICBjb25zb2xlLmxvZyhjYW1fdHlwZSk7CgogICAgaWYgKGNhbV90eXBlID09IDApIHsKICAgICAgLy9sb2dpdGVjaAogICAgICB0aGlzLnJ1bGVyX3ZpZGVvX3dpZHRoX3JhdGlvID0gMS4yOTsgLy8xLjQyOAogICAgfSBlbHNlIHsKICAgICAgdGhpcy5ydWxlcl92aWRlb193aWR0aF9yYXRpbyA9IDAuNzc7IC8vMC43NDMyLCAwLjg1NTZuZWVkIHRvIGdldCB0aGlzIHJhdGlvIGNoZWNrIHRoaXMgcmF0aW8gb24gZmluYWwgYm94ZXMKICAgIH0KCiAgICB0aGlzLnZpZGVvX2NhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlby1jYW52YXMiKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBzaGFwZXMgPSBbXTsgLy9lbnN1cmUgd2hlbiBtb3VudGVkIGFnYWluIHRoYXQgdGhlIHNoYXBlcyBhcmUgbm90IHJlZHJhd24KCiAgICBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid29ya3NwYWNlIik7CiAgICBjYW52YXMud2lkdGggPSBzY3JlZW4ud2lkdGg7CiAgICBjYW52YXMuaGVpZ2h0ID0gc2NyZWVuLmhlaWdodDsKICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOyAvL2FkZCBhIGtleSBwcmVzcyBtb2RpZmllcnMgdG8gdGhlIHdpbmRvdwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy51cGRhdGVNb2RlLCBmYWxzZSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLnVwZGF0ZU1vZGUsIGZhbHNlKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoX3RoaXMyLnJlc2l6ZVJ1bGVyLCAxMDApOwogICAgfSk7CiAgICB0aGlzLnJlc2l6ZVJ1bGVyKCk7CiAgfSwKICB3YXRjaDogewogICAgcHJvdHJhY3RvckFkZGVkOiBmdW5jdGlvbiBwcm90cmFjdG9yQWRkZWQoc2V0KSB7CiAgICAgIGlmIChzZXQpIHsKICAgICAgICB0aGlzLmFkZFByb3RyYWN0b3IoKTsKICAgICAgfQogICAgfSwKICAgIHJ1bGVyQWRkZWQ6IGZ1bmN0aW9uIHJ1bGVyQWRkZWQoc2V0KSB7CiAgICAgIGlmIChzZXQpIHsKICAgICAgICB0aGlzLmFkZFJ1bGVyKCk7IC8vdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldEFjaGlldmVtZW50Q29tcGxldGVkJywgJ3J1bGVyJyk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGRyYXc6IGZ1bmN0aW9uIGRyYXcoKSB7CiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgc2NyZWVuLndpZHRoLCBzY3JlZW4uaGVpZ2h0KTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hhcGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY3R4LnNhdmUoKTsKCiAgICAgICAgaWYgKHNoYXBlc1tpXS5pbWFnZSAhPSBudWxsKSB7CiAgICAgICAgICBpZiAoc2hhcGVzW2ldLmltYWdlID09IHJ1bGVyKSB7CiAgICAgICAgICAgIHNoYXBlc1tpXS53aWR0aCA9IHRoaXMucnVsZXJfd2lkdGg7CiAgICAgICAgICAgIHNoYXBlc1tpXS5oZWlnaHQgPSB0aGlzLnJ1bGVyX2hlaWdodDsKICAgICAgICAgIH0KCiAgICAgICAgICBjdHgudHJhbnNsYXRlKHNoYXBlc1tpXS54LCBzaGFwZXNbaV0ueSk7CiAgICAgICAgICBjdHgudHJhbnNsYXRlKHNoYXBlc1tpXS53aWR0aCAvIDIsIHNoYXBlc1tpXS5oZWlnaHQgLyAyKTsKICAgICAgICAgIGN0eC5yb3RhdGUoc2hhcGVzW2ldLmFuZ2xlKTsgLy9jdHgyLmRyYXdJbWFnZShzaGFwZXNbaV0uaW1hZ2UsIHNoYXBlc1tpXS54LCBzaGFwZXNbaV0ueSwgc2hhcGVzW2ldLndpZHRoLCBzaGFwZXNbaV0uaGVpZ2h0KTsKCiAgICAgICAgICBjdHguZHJhd0ltYWdlKHNoYXBlc1tpXS5pbWFnZSwgLXNoYXBlc1tpXS53aWR0aCAvIDIsIC1zaGFwZXNbaV0uaGVpZ2h0IC8gMiwgc2hhcGVzW2ldLndpZHRoLCBzaGFwZXNbaV0uaGVpZ2h0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gY3R4Mi5jbGVhclJlY3QoMCwwLHNjcmVlbi53aWR0aCwgc2NyZWVuLmhlaWdodCk7CiAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICBjdHgucmVjdChzaGFwZXNbaV0ueCwgc2hhcGVzW2ldLnksIHNoYXBlc1tpXS53aWR0aCwgc2hhcGVzW2ldLmhlaWdodCk7CiAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjNDQ0NDQ0IjsKICAgICAgICB9CgogICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRQcm90cmFjdG9yOiBmdW5jdGlvbiBhZGRQcm90cmFjdG9yKCkgewogICAgICBwcm90cmFjdG9yLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgeCA9IDEwMDsKICAgICAgICB2YXIgeSA9IDEwMDsKICAgICAgICB2YXIgdyA9IDQwMDsKICAgICAgICB2YXIgaCA9IDIwMDsKICAgICAgICBzaGFwZXMucHVzaCh7CiAgICAgICAgICB4OiB4LAogICAgICAgICAgeTogeSwKICAgICAgICAgIHdpZHRoOiB3LAogICAgICAgICAgaGVpZ2h0OiBoLAogICAgICAgICAgaW1hZ2U6IHByb3RyYWN0b3IsCiAgICAgICAgICBhbmdsZTogMAogICAgICAgIH0pOwogICAgICAgIGN0eC5kcmF3SW1hZ2UocHJvdHJhY3RvciwgeCwgeSwgdywgaCk7CiAgICAgIH07CgogICAgICBwcm90cmFjdG9yLnNyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcm90cmFjdG9yIikuc3JjOwogICAgfSwKICAgIGFkZFJ1bGVyOiBmdW5jdGlvbiBhZGRSdWxlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJ1bGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgeCA9IDEwMDsKICAgICAgICB2YXIgeSA9IDEwMDsKICAgICAgICB2YXIgdyA9IF90aGlzLnJ1bGVyX3dpZHRoOwogICAgICAgIHZhciBoID0gX3RoaXMucnVsZXJfaGVpZ2h0OwogICAgICAgIHNoYXBlcy5wdXNoKHsKICAgICAgICAgIHg6IHgsCiAgICAgICAgICB5OiB5LAogICAgICAgICAgd2lkdGg6IHcsCiAgICAgICAgICBoZWlnaHQ6IGgsCiAgICAgICAgICBpbWFnZTogcnVsZXIsCiAgICAgICAgICBhbmdsZTogMAogICAgICAgIH0pOwogICAgICAgIGN0eC5kcmF3SW1hZ2UocnVsZXIsIHgsIHksIHcsIGgpOwogICAgICB9OwoKICAgICAgcnVsZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygnbm8gaW1hZ2UnKTsKICAgICAgfTsKCiAgICAgIHJ1bGVyLnNyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJydWxlci1pbWFnZSIpLnNyYzsKICAgIH0sCiAgICB1cGRhdGVNb2RlOiBmdW5jdGlvbiB1cGRhdGVNb2RlKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5yZXBlYXQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGV2ZW50LmtleSA9PSAibyIpIHsKICAgICAgICAgIHRoaXMucm90YXRlTW9kZSA9ICF0aGlzLnJvdGF0ZU1vZGU7CiAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT0gInciICYmIGV2ZW50LnR5cGUgPT0gJ2tleWRvd24nKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7CiAgICAgICAgICB0aGlzLndvcmtzcGFjZV9jYW52YXNfY2xpY2thYmxlID0gIXRoaXMud29ya3NwYWNlX2NhbnZhc19jbGlja2FibGU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2hlY2tDbGljazogZnVuY3Rpb24gY2hlY2tDbGljayhldmVudCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoYXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBvcmlnaW4gPSBbMCwgMF07CiAgICAgICAgdmFyIGNlbnRyZSA9IFtzaGFwZXNbaV0ueCArIHNoYXBlc1tpXS53aWR0aCAvIDIsIHNoYXBlc1tpXS55ICsgc2hhcGVzW2ldLmhlaWdodCAvIDJdOyAvL2NsaWNrIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBjZW50cmUgb2YgdGhlIHNoYXBlLgoKICAgICAgICB2YXIgY2xpY2tQb3MgPSBbZXZlbnQub2Zmc2V0WCAtIGNlbnRyZVswXSwgZXZlbnQub2Zmc2V0WSAtIGNlbnRyZVsxXV07IC8vbGV0IGNsaWNrUG9zID0gW2V2ZW50Lm9mZnNldFgsIGV2ZW50Lm9mZnNldFldOwogICAgICAgIC8vZnJvbSB0aGUgY2VudHJlIG9mIHRoZSBzaGFwZQoKICAgICAgICB2YXIgdmVydGljZXMgPSBbXTsKICAgICAgICB2YXIgdmVydGV4MSA9IFtzaGFwZXNbaV0ueCAtIGNlbnRyZVswXSwgc2hhcGVzW2ldLnkgLSBjZW50cmVbMV1dOwogICAgICAgIHZhciB2ZXJ0ZXgyID0gW3NoYXBlc1tpXS54ICsgc2hhcGVzW2ldLndpZHRoIC0gY2VudHJlWzBdLCBzaGFwZXNbaV0ueSAtIGNlbnRyZVsxXV07CiAgICAgICAgdmFyIHZlcnRleDMgPSBbc2hhcGVzW2ldLnggKyBzaGFwZXNbaV0ud2lkdGggLSBjZW50cmVbMF0sIHNoYXBlc1tpXS55ICsgc2hhcGVzW2ldLmhlaWdodCAtIGNlbnRyZVsxXV07CiAgICAgICAgdmFyIHZlcnRleDQgPSBbc2hhcGVzW2ldLnggLSBjZW50cmVbMF0sIHNoYXBlc1tpXS55ICsgc2hhcGVzW2ldLmhlaWdodCAtIGNlbnRyZVsxXV07CiAgICAgICAgdmVydGljZXMucHVzaCh2ZXJ0ZXgxKTsKICAgICAgICB2ZXJ0aWNlcy5wdXNoKHZlcnRleDIpOwogICAgICAgIHZlcnRpY2VzLnB1c2godmVydGV4Myk7CiAgICAgICAgdmVydGljZXMucHVzaCh2ZXJ0ZXg0KTsKICAgICAgICB2YXIgYW5nbGUgPSBzaGFwZXNbaV0uYW5nbGU7IC8vcm90YXRlIHRoZSB2ZXJ0aWNlcyBhcm91bmQgdGhlIGNlbnRyZSBvZiB0aGUgc2hhcGUKCiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IDQ7IF9pKyspIHsKICAgICAgICAgIHZhciB4X3ByZXYgPSB2ZXJ0aWNlc1tfaV1bMF07CiAgICAgICAgICB2YXIgeV9wcmV2ID0gdmVydGljZXNbX2ldWzFdOwogICAgICAgICAgdmVydGljZXNbX2ldWzBdID0geF9wcmV2ICogTWF0aC5jb3MoYW5nbGUpIC0geV9wcmV2ICogTWF0aC5zaW4oYW5nbGUpOwogICAgICAgICAgdmVydGljZXNbX2ldWzFdID0geF9wcmV2ICogTWF0aC5zaW4oYW5nbGUpICsgeV9wcmV2ICogTWF0aC5jb3MoYW5nbGUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLmRvSW50ZXJzZWN0KG9yaWdpbiwgY2xpY2tQb3MsIHZlcnRpY2VzWzBdLCB2ZXJ0aWNlc1sxXSkgJiYgIXRoaXMuZG9JbnRlcnNlY3Qob3JpZ2luLCBjbGlja1BvcywgdmVydGljZXNbMV0sIHZlcnRpY2VzWzJdKSAmJiAhdGhpcy5kb0ludGVyc2VjdChvcmlnaW4sIGNsaWNrUG9zLCB2ZXJ0aWNlc1syXSwgdmVydGljZXNbM10pICYmICF0aGlzLmRvSW50ZXJzZWN0KG9yaWdpbiwgY2xpY2tQb3MsIHZlcnRpY2VzWzNdLCB2ZXJ0aWNlc1swXSkpIHsKICAgICAgICAgIHRoaXMuaXNTZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkX2luZGV4ID0gaTsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfb2Zmc2V0X3ggPSBldmVudC5vZmZzZXRYIC0gc2hhcGVzW2ldLng7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkX29mZnNldF95ID0gZXZlbnQub2Zmc2V0WSAtIHNoYXBlc1tpXS55OwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIFRvIGZpbmQgb3JpZW50YXRpb24gb2Ygb3JkZXJlZCB0cmlwbGV0IChwLCBxLCByKS4gCiAgICAvLyBUaGUgZnVuY3Rpb24gcmV0dXJucyBmb2xsb3dpbmcgdmFsdWVzIAogICAgLy8gMCAtLT4gcCwgcSBhbmQgciBhcmUgY29saW5lYXIgCiAgICAvLyAxIC0tPiBDbG9ja3dpc2UgCiAgICAvLyAyIC0tPiBDb3VudGVyY2xvY2t3aXNlIAogICAgY2hlY2tPcmllbnRhdGlvbjogZnVuY3Rpb24gY2hlY2tPcmllbnRhdGlvbihxLCBwLCByKSB7CiAgICAgIC8vIFNlZSBodHRwczovL3d3dy5nZWVrc2ZvcmdlZWtzLm9yZy9vcmllbnRhdGlvbi0zLW9yZGVyZWQtcG9pbnRzLyAKICAgICAgLy8gZm9yIGRldGFpbHMgb2YgYmVsb3cgZm9ybXVsYS4gCiAgICAgIHZhciB2YWwgPSAocVsxXSAtIHBbMV0pICogKHJbMF0gLSBxWzBdKSAtIChxWzBdIC0gcFswXSkgKiAoclsxXSAtIHFbMV0pOwogICAgICBpZiAodmFsID09IDApIHJldHVybiAwOyAvLyBjb2xpbmVhciAKCiAgICAgIHJldHVybiB2YWwgPiAwID8gMSA6IDI7IC8vIGNsb2NrIG9yIGNvdW50ZXJjbG9jayB3aXNlIAogICAgfSwKICAgIGRvSW50ZXJzZWN0OiBmdW5jdGlvbiBkb0ludGVyc2VjdChwMSwgcTEsIHAyLCBxMikgewogICAgICB2YXIgbzEgPSB0aGlzLmNoZWNrT3JpZW50YXRpb24ocDEsIHExLCBwMik7CiAgICAgIHZhciBvMiA9IHRoaXMuY2hlY2tPcmllbnRhdGlvbihwMSwgcTEsIHEyKTsKICAgICAgdmFyIG8zID0gdGhpcy5jaGVja09yaWVudGF0aW9uKHAyLCBxMiwgcDEpOwogICAgICB2YXIgbzQgPSB0aGlzLmNoZWNrT3JpZW50YXRpb24ocDIsIHEyLCBxMSk7IC8vIEdlbmVyYWwgY2FzZSAKCiAgICAgIGlmIChvMSAhPSBvMiAmJiBvMyAhPSBvNCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG1vdmVDbGlja2VkOiBmdW5jdGlvbiBtb3ZlQ2xpY2tlZChldmVudCkgewogICAgICBpZiAodGhpcy5pc1NlbGVjdGVkKSB7CiAgICAgICAgaWYgKHRoaXMucm90YXRlTW9kZSkgewogICAgICAgICAgaWYgKGV2ZW50Lm1vdmVtZW50WSA8IDApIHsKICAgICAgICAgICAgc2hhcGVzW3RoaXMuc2VsZWN0ZWRfaW5kZXhdLmFuZ2xlIC09IE1hdGguUEkgLyAxODA7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50Lm1vdmVtZW50WSA+IDApIHsKICAgICAgICAgICAgc2hhcGVzW3RoaXMuc2VsZWN0ZWRfaW5kZXhdLmFuZ2xlICs9IE1hdGguUEkgLyAxODA7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vY3R4Mi5jbGVhclJlY3QocmVjdF90b3BfbGVmdF94LCByZWN0X3RvcF9sZWZ0X3ksIHJlY3Rfd2lkdGgsIHJlY3RfaGVpZ2h0KTsKICAgICAgICAgIHNoYXBlc1t0aGlzLnNlbGVjdGVkX2luZGV4XS54ID0gZXZlbnQub2Zmc2V0WCAtIHRoaXMuc2VsZWN0ZWRfb2Zmc2V0X3g7CiAgICAgICAgICBzaGFwZXNbdGhpcy5zZWxlY3RlZF9pbmRleF0ueSA9IGV2ZW50Lm9mZnNldFkgLSB0aGlzLnNlbGVjdGVkX29mZnNldF95OwogICAgICAgIH0KCiAgICAgICAgdGhpcy5kcmF3KCk7IC8vcmVkcmF3IHRoZSBzaGFwZXMgb25seSB3aGVuIGF0dGVtcHRpbmcgdG8gbW92ZQogICAgICB9CiAgICB9LAogICAgbW91c2VVbmNsaWNrOiBmdW5jdGlvbiBtb3VzZVVuY2xpY2soKSB7CiAgICAgIHRoaXMuaXNTZWxlY3RlZCA9IGZhbHNlOwogICAgICB0aGlzLnNlbGVjdGVkX2luZGV4ID0gbnVsbDsKICAgIH0sCiAgICByZXNpemVSdWxlcjogZnVuY3Rpb24gcmVzaXplUnVsZXIoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdyZXNpemluZycpOwogICAgICB0aGlzLnJ1bGVyX3dpZHRoID0gdGhpcy52aWRlb19jYW52YXMuY2xpZW50V2lkdGggKiB0aGlzLnJ1bGVyX3ZpZGVvX3dpZHRoX3JhdGlvOwogICAgICB0aGlzLnJ1bGVyX2hlaWdodCA9IHRoaXMucnVsZXJfcmF0aW8gKiB0aGlzLnJ1bGVyX3dpZHRoOwogICAgICB0aGlzLmRyYXcoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/Workspace.vue"],"names":[],"mappings":"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","sourcesContent":["//Updated for Vue3, removing eventBus $on waiting for addruler/protractor event - now controlled through props from App.vue\n\n<template>\n<div>\n    <canvas :class=\"workspace_canvas_clickable ? 'clickable' : 'unclickable'\" id=\"workspace\" @mousedown=\"checkClick\" @mousemove=\"moveClicked\" @mouseup=\"mouseUnclick\"></canvas>\n    <img id=\"ruler-image\" src=\"../../public/images/ruler.png\" hidden>\n    <img id=\"protractor\" src=\"../../public/images/protractor.png\" hidden>\n    \n</div>\n</template>\n\n<script>\n\nvar canvas;\nvar ctx;\nlet protractor = new Image();\nlet ruler = new Image();\nlet shapes = [];        //the added objects to canvas\n\nexport default {\n    name: \"Workspace\",\n    props:{\n      protractorAdded: Boolean,\n      rulerAdded: Boolean\n  },\n    data(){\n        return{\n            isSelected: false,\n            selected_index: null,\n            selected_offset_x: 0,\n            selected_offset_y: 0,\n            rotateMode: false,\n            workspace_canvas_clickable: true,\n            ruler_width: 800,\n            ruler_height: 80,\n            ruler_video_width_ratio: 1.428,\n            ruler_ratio: 0.1,\n            video_canvas: null,\n        }\n    },\n    created(){\n        \n        let cam_type = this.$store.getters.getCamera;\n        console.log(cam_type);\n        if(cam_type == 0){  //logitech\n            this.ruler_video_width_ratio = 1.29;       //1.428\n        } else{\n            this.ruler_video_width_ratio = 0.77;     //0.7432, 0.8556need to get this ratio check this ratio on final boxes\n        }\n        this.video_canvas = document.getElementById(\"video-canvas\");\n    },\n    mounted(){\n        shapes = [];        //ensure when mounted again that the shapes are not redrawn\n        canvas = document.getElementById(\"workspace\");\n        canvas.width = screen.width;\n        canvas.height = screen.height;\n        ctx = canvas.getContext(\"2d\");\n\n        //add a key press modifiers to the window\n        window.addEventListener('keydown', this.updateMode, false);\n        window.addEventListener('keyup', this.updateMode, false);\n        window.addEventListener('resize', () => {setTimeout(this.resizeRuler, 100)});\n\n        this.resizeRuler();\n    },\n    watch:{\n        protractorAdded(set) {\n            if(set){\n                this.addProtractor();\n            }\n        },\n        rulerAdded(set) {\n            if(set){\n                this.addRuler();\n                //this.$store.dispatch('setAchievementCompleted', 'ruler');\n            }\n        },\n    },\n    methods:{\n        draw() {\n            ctx.clearRect(0,0,screen.width, screen.height);\n\n            for(let i=0; i< shapes.length;i++){\n\n                ctx.save();\n\n                if(shapes[i].image != null){\n                    if(shapes[i].image == ruler){\n                        shapes[i].width = this.ruler_width;\n                        shapes[i].height = this.ruler_height;\n                    } \n                    ctx.translate(shapes[i].x,shapes[i].y);\n                    ctx.translate(shapes[i].width/2, shapes[i].height/2)\n                    ctx.rotate(shapes[i].angle);\n                    //ctx2.drawImage(shapes[i].image, shapes[i].x, shapes[i].y, shapes[i].width, shapes[i].height);\n                    ctx.drawImage(shapes[i].image, -shapes[i].width/2, -shapes[i].height/2, shapes[i].width, shapes[i].height);\n                } \n                else\n                {\n                    // ctx2.clearRect(0,0,screen.width, screen.height);\n                    ctx.beginPath();\n                    ctx.rect(shapes[i].x, shapes[i].y, shapes[i].width, shapes[i].height);\n                    ctx.stroke();\n                    ctx.fill();\n                    ctx.fillStyle = \"#444444\";\n                }\n\n                ctx.restore();\n            }\n\n        },\n        addProtractor(){\n            protractor.onload = function() {\n                let x = 100;\n                let y= 100;\n                let w=400;\n                let h=200;\n                shapes.push( {x:x, y:y, width:w, height:h, image:protractor, angle:0} );\n                ctx.drawImage(protractor, x, y, w, h);\n                \n                \n            };\n            protractor.src = document.getElementById(\"protractor\").src;\n        },\n        addRuler(){\n            let _this = this;\n            ruler.onload = function() {\n                let x = 100;\n                let y= 100;\n                let w = _this.ruler_width;\n                let h = _this.ruler_height;\n                \n                shapes.push( {x:x, y:y, width:w, height:h, image:ruler, angle:0} );\n                ctx.drawImage(ruler, x, y, w, h);\n                \n            };\n\n            ruler.onerror = function(){\n                console.log('no image');\n            }\n            \n            ruler.src = document.getElementById(\"ruler-image\").src;\n        \n        },\n        updateMode(event){\n            if(event.repeat){\n                return;\n            } else{\n                if(event.key == \"o\"){\n                    this.rotateMode = !this.rotateMode;\n                } \n                else if(event.key == \"w\" && event.type == 'keydown'){\n                    console.log(event);\n                    this.workspace_canvas_clickable = !this.workspace_canvas_clickable;\n                }\n            }\n            \n        },\n        checkClick(event){\n            for(let i=0; i<shapes.length;i++){\n\n                let origin = [0,0];\n                let centre = [shapes[i].x + shapes[i].width/2, shapes[i].y + shapes[i].height/2];\n\n                //click position relative to the centre of the shape.\n                let clickPos = [event.offsetX - centre[0], event.offsetY - centre[1]];\n                //let clickPos = [event.offsetX, event.offsetY];\n\n                //from the centre of the shape\n                let vertices = [];\n                let vertex1 = [shapes[i].x - centre[0], shapes[i].y - centre[1]];\n                let vertex2 = [shapes[i].x + shapes[i].width - centre[0], shapes[i].y - centre[1]];\n                let vertex3 = [shapes[i].x + shapes[i].width - centre[0], shapes[i].y + shapes[i].height - centre[1]];\n                let vertex4 = [shapes[i].x - centre[0], shapes[i].y + shapes[i].height - centre[1]];\n                vertices.push(vertex1);\n                vertices.push(vertex2);\n                vertices.push(vertex3);\n                vertices.push(vertex4);\n\n                let angle = shapes[i].angle;\n\n                //rotate the vertices around the centre of the shape\n                for(let i=0;i<4;i++){\n                    let x_prev = vertices[i][0];\n                    let y_prev = vertices[i][1];\n\n                    vertices[i][0] = x_prev*Math.cos(angle) - y_prev*Math.sin(angle);\n                    vertices[i][1] = x_prev*Math.sin(angle) + y_prev*Math.cos(angle);\n                }\n                \n                if(!this.doIntersect(origin,clickPos,vertices[0], vertices[1]) && !this.doIntersect(origin,clickPos,vertices[1], vertices[2]) && !this.doIntersect(origin,clickPos,vertices[2], vertices[3]) && !this.doIntersect(origin,clickPos,vertices[3], vertices[0])){\n                    this.isSelected = true;\n                    this.selected_index = i;\n                    this.selected_offset_x = event.offsetX - shapes[i].x;\n                    this.selected_offset_y = event.offsetY - shapes[i].y;\n                }\n\n            }\n            \n        },\n        // To find orientation of ordered triplet (p, q, r). \n        // The function returns following values \n        // 0 --> p, q and r are colinear \n        // 1 --> Clockwise \n        // 2 --> Counterclockwise \n        checkOrientation(q, p, r){\n            // See https://www.geeksforgeeks.org/orientation-3-ordered-points/ \n                // for details of below formula. \n                let val = (q[1] - p[1]) * (r[0] - q[0]) - \n                        (q[0] - p[0]) * (r[1] - q[1]); \n            \n                if (val == 0) return 0;  // colinear \n            \n                return (val > 0) ? 1: 2; // clock or counterclock wise \n        },\n        doIntersect(p1,q1,p2,q2){\n            let o1 = this.checkOrientation(p1, q1, p2); \n            let o2 = this.checkOrientation(p1, q1, q2); \n            let o3 = this.checkOrientation(p2, q2, p1); \n            let o4 = this.checkOrientation(p2, q2, q1); \n  \n            // General case \n            if (o1 != o2 && o3 != o4) {\n                return true;\n            } else{\n                return false;\n            }\n                 \n        },\n        moveClicked(event){\n            if(this.isSelected){\n                if(this.rotateMode){\n                    if(event.movementY < 0){\n                        shapes[this.selected_index].angle -= Math.PI/180;\n                    } else if(event.movementY > 0){\n                        shapes[this.selected_index].angle += Math.PI/180;\n                    }\n                    \n                } \n                else\n                {\n                    //ctx2.clearRect(rect_top_left_x, rect_top_left_y, rect_width, rect_height);\n                    shapes[this.selected_index].x = event.offsetX - this.selected_offset_x;\n                    shapes[this.selected_index].y = event.offsetY - this.selected_offset_y;\n                \n                }\n                this.draw();        //redraw the shapes only when attempting to move\n            }\n            \n        },\n        mouseUnclick(){\n            this.isSelected = false;\n            this.selected_index = null;\n        },\n        resizeRuler(){\n            console.log('resizing');\n            this.ruler_width = this.video_canvas.clientWidth * this.ruler_video_width_ratio;\n            \n            this.ruler_height = this.ruler_ratio*this.ruler_width;\n             \n            this.draw();\n            \n        },\n    }\n}\n\n\n</script>\n\n<style scoped>\n\n#workspace{\n    z-index: 2;\n    position:absolute;\n    left:0px;\n    top:100px;\n    /* pointer-events: none; */\n}\n\n.unclickable{\n    pointer-events: none;\n    opacity: 0.5;\n}\n\n.clickable{\n    pointer-events: all;\n    opacity: 1;\n}\n\n\n</style>"],"sourceRoot":""}]}