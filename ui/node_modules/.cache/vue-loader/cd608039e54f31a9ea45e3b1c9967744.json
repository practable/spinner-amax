{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/MotorSnapshot.vue?vue&type=style&index=0&id=23ac909c&scoped=true&lang=css","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/MotorSnapshot.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiNzbmFwc2hvdCAgICAgICAge2JhY2tncm91bmQtY29sb3I6IHJnYigyMTcsIDI1NSwgMCk7fQojc25hcHNob3Q6aG92ZXIgIHtiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTkwLCAxODcsIDIpO30KI3Jlc2V0X3NuYXBzICAgICAgICB7YmFja2dyb3VuZC1jb2xvcjogcmdiKDI0MywgMTE3LCA0NCk7fQojcmVzZXRfc25hcHM6aG92ZXIgIHtiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQzLCA3LCA3KTt9CiNkb3dubG9hZF9zbmFwcyAgICAgICAge2JhY2tncm91bmQtY29sb3I6IHJnYig0NCwgMjQzLCAyMDApO30KI2Rvd25sb2FkX3NuYXBzOmhvdmVyICB7YmFja2dyb3VuZC1jb2xvcjogcmdiKDcsIDgyLCAyNDMpO30KCgouY3VycmVudHsKICAgIGJvcmRlcjogdGhpbjsKCWJveC1zaGFkb3c6IDBweCAwcHg7CiAgICBjb2xvcjogZ3JlZW4KfQoKLmgtZGl2aWRlcnsKIG1hcmdpbi10b3A6NXB4OwogbWFyZ2luLWJvdHRvbTo1cHg7CiBoZWlnaHQ6MXB4Owogd2lkdGg6MTAwJTsKIGJvcmRlci10b3A6MXB4IHNvbGlkIGdyYXk7Cn0KCi52LWRpdmlkZXJ7CiBtYXJnaW4tbGVmdDo1cHg7CiBtYXJnaW4tcmlnaHQ6NXB4OwogcGFkZGluZzogMHB4Owogd2lkdGg6MXB4OwogaGVpZ2h0OjEwMCU7CiBib3JkZXItcmlnaHQ6MXB4IHNvbGlkIGdyYXk7Cn0KCi5tb2RhbC1zaG93ewogICAgZGlzcGxheTogYmxvY2s7Cn0K"},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/MotorSnapshot.vue"],"names":[],"mappings":";AA4MA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACzD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACtD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;;AAG1D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC1B;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC5B;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAClB","file":"/home/david/spinner-amax/ui/src/components/MotorSnapshot.vue","sourceRoot":"","sourcesContent":["//vue3 update\n//vastly streamlined\n\n<template>\n<div class=\"m-2 bg-white border rounded\" id='motor-snapshot-div'>\n    <div class=\"row justify-content-center align-items-center\" >\n\n        <table class=\"table\">\n            <tr>\n                <th v-for='heading in headings' :key=\"heading\" scope=\"col\">{{heading}}</th>\n            </tr>\n\n            <tr v-for=\"row in snaps\" :id=\"row.time\" :key=\"row.time\">\n                <td v-for='key in Object.keys(row)' :key=\"key\">{{row[key]}}</td>\n            </tr>\n\n            <tr class='current'>\n                <td>{{getTime.toFixed(2)}}</td>\n                <td>{{getCurrentAngle.toFixed(2)}}</td>\n                <td>{{getCurrentAngularVelocity.toFixed(2)}}</td>\n                <td>{{getCommand.toFixed(2)}}</td>\n                <td>{{getDrive.toFixed(2)}}</td>\n                <td>{{getError.toFixed(2)}}</td>\n            </tr>\n                            \n        </table> \n\n\t</div>\n\n\n    <div class='d-grid gap-2 d-sm-block'>\n        <button id=\"snapshot\" type='button' class=\"btn btn-sm\" @click=\"takeSnapshot\">Record Snapshot</button>\n        <button id=\"reset_snaps\" type='button' class=\"btn btn-sm\" @click=\"toggleResetModal\">Reset</button>\n        <button id=\"download_snaps\" type='button' class=\"btn btn-sm\" @click=\"outputToCSV\">Download Snapshots</button>\n    </div>\n    \n     <toolbar parentCanvasID=\"\" parentComponentName=\"snapshot\" parentDivID=\"motor-snapshot-div\" :showDownload='false' :showPopupHelp=\"true\" :showOptions=\"false\">  \n        <template v-slot:popup id='snapshot-popup'>\n            <div class='row mb-2'>\n                <div class='col'>\n                    <h3> Snapshot tool </h3>\n                    <p> Click 'Record Snapshot' to save the current state to the snapshot table. Every time you click a new data set will be added. Click 'Download Snapshots'\n                        to download all the snapshots as a .csv file.\n                    </p>\n                </div>\n            </div>\n\n        </template>\n    </toolbar>\n\n    <div v-if='showResetConfirmModal' class=\"modal modal-show\" tabindex=\"-1\" role=\"dialog\">\n        <div class=\"modal-dialog\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\">Reset Data</h5>\n              <button type=\"button\" class=\"btn btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click='toggleResetModal'>\n                \n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <p>Are you sure you want to Reset? This will clear all stored data.</p>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-primary\" @click=\"resetSnaps(); toggleResetModal();\">Reset</button>\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\" data-bs-dismiss=\"modal\" @click=\"toggleResetModal\">Cancel</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport Toolbar from \"./elements/Toolbar.vue\"\n\nexport default {\n    name: 'MotorSnapshot',\n    props:[\n      'headings'\n    ],\n    components:{\n        Toolbar,\n    },\n    data(){\n        return{\n            snapshot_time: 0,\n            snapshot_position: 0,\n            snapshot_velocity: 0,\n            snapshot_command: 0,\n            snapshot_drive: 0,\n            snapshot_error: 0,\n            snaps: [],\n            showResetConfirmModal: false\n        }\n    },\n    computed:{\n        ...mapGetters([\n            'getTime',\n            'getIsRecording',\n            'getCurrentAngle',\n            'getCurrentAngularVelocity',\n        ]),\n        getError(){\n            let error = this.$store.getters.getError;\n            if(error == null){\n                return 0;\n            } else{\n                return error;\n            }\n        },\n        getDrive(){\n            let drive = this.$store.getters.getDrive;\n            if(drive == null){\n                return 0;\n            } else{\n                return drive;\n            }\n        },\n        getCommand(){\n            let command = this.$store.getters.getCommand;\n            if(command == null){\n                return 0;\n            } else{\n                return command;\n            }\n        },\n\n\n    },\n    methods: {\n        takeSnapshot(){\n            this.snapshot_time = this.getTime;\n            this.snapshot_position = this.getCurrentAngle;\n            this.snapshot_velocity = this.getCurrentAngularVelocity;\n            this.snapshot_command = this.getCommand;\n            this.snapshot_drive = this.getDrive;\n            this.snapshot_error = this.getError;\n            \n            let new_snap = {time: (this.snapshot_time).toFixed(2), position: (this.snapshot_position).toFixed(2), velocity: (this.snapshot_velocity).toFixed(2), command: (this.snapshot_command).toFixed(2), drive: (this.snapshot_drive).toFixed(2), error: (this.snapshot_error).toFixed(2)};\n            this.snaps.push(new_snap);\n            \n            \n        },\n        resetSnaps(){\n            this.snaps = [];\n        },\n        toggleResetModal(){\n            this.showResetConfirmModal = !this.showResetConfirmModal;\n        },\n        outputToCSV(){\n          let csv = '';\n          let filename = '';\n            let date = new Date();\n            filename = 'SNAPSHOTs_' + date.getDate().toString() + (date.getMonth() + 1).toString() + date.getFullYear().toString();\n          \n              csv = 'Time/s,Angle/rad,AngVel/rad/s,Command,Drive,Error\\n';\n            \n            this.snaps.forEach(function(d){\n                csv += d.time.toString();\n                csv += \",\";\n                csv += d.position.toString();\n                csv += ',';\n                csv += d.velocity.toString();\n                if(d.command != null){\n                  csv += \",\";\n                  csv += d.command.toString();\n                } else {\n                  csv += \",\";\n                  csv += \"\";\n                }\n                if(d.drive != null){\n                  csv += \",\";\n                  csv += d.drive.toString();\n                } else{\n                  csv += \",\";\n                  csv += \"\";\n                }\n\n                if(d.error != null){\n                  csv += \",\";\n                  csv += d.error.toString();\n                } else{\n                  csv += \",\";\n                  csv += \"\";\n                }\n                     \n                csv += \"\\n\";\n            });\n            filename += '.csv';\n          \n          let hiddenElement = document.createElement('a');\n          hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);\n          hiddenElement.target = '_blank';\n          hiddenElement.download = filename;\n          hiddenElement.click();\n      },\n      },\n      \n}\n</script>\n\n<style scoped>\n#snapshot        {background-color: rgb(217, 255, 0);}\n#snapshot:hover  {background-color: rgb(190, 187, 2);}\n#reset_snaps        {background-color: rgb(243, 117, 44);}\n#reset_snaps:hover  {background-color: rgb(243, 7, 7);}\n#download_snaps        {background-color: rgb(44, 243, 200);}\n#download_snaps:hover  {background-color: rgb(7, 82, 243);}\n\n\n.current{\n    border: thin;\n\tbox-shadow: 0px 0px;\n    color: green\n}\n\n.h-divider{\n margin-top:5px;\n margin-bottom:5px;\n height:1px;\n width:100%;\n border-top:1px solid gray;\n}\n\n.v-divider{\n margin-left:5px;\n margin-right:5px;\n padding: 0px;\n width:1px;\n height:100%;\n border-right:1px solid gray;\n}\n\n.modal-show{\n    display: block;\n}\n</style>\n"]}]}