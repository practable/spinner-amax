{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js!/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/LoggingStream.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/LoggingStream.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvc3Bpbm5lci1hbWF4L3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IExvZ2dpbmcgZnJvbSAiLi9Mb2dnaW5nLnZ1ZSI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dnaW5nU3RyZWFtIiwKICBjb21wb25lbnRzOiB7CiAgICBMb2dnaW5nOiBMb2dnaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RyZWFtOiBPYmplY3QKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy9tYWtlIHNlY29uZCBhbmQgc3Vic2VxdWVudCBjb25uZWN0aW9ucwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic3RyZWFtczpkcm9wcGVkIiwgdGhpcy5nZXRXZWJzb2NrZXRDb25uZWN0aW9uKTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydnZXRMb2dVUkxPYnRhaW5lZCcsICdnZXRMb2dVUkwnXSkpLCB7fSwgewogICAgc3RyZWFtT0s6IGZ1bmN0aW9uIHN0cmVhbU9LKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTdHJlYW0oImxvZyIpOwogICAgfQogIH0pLAogIHdhdGNoOiB7CiAgICBzdHJlYW1PSzogZnVuY3Rpb24gc3RyZWFtT0soaXMpIHsKICAgICAgaWYgKGlzKSB7CiAgICAgICAgdGhpcy5nZXRXZWJzb2NrZXRDb25uZWN0aW9uKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIm5vIGxvZyBzdHJlYW0iKTsKICAgICAgfQogICAgfSwKICAgIGdldExvZ1VSTE9idGFpbmVkOiBmdW5jdGlvbiBnZXRMb2dVUkxPYnRhaW5lZChpcykgewogICAgICBpZiAoaXMpIHsKICAgICAgICBjb25zb2xlLmxvZygiZ2V0IGxvZ1VSTCIsIHRoaXMuZ2V0TG9nVVJMT2J0YWluZWQsIHRoaXMuZ2V0TG9nVVJMKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0V2Vic29ja2V0Q29ubmVjdGlvbjogZnVuY3Rpb24gZ2V0V2Vic29ja2V0Q29ubmVjdGlvbigpIHsKICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFN0cmVhbSgibG9nIik7CiAgICAgIHZhciBhY2Nlc3NVUkwgPSB0aGlzLnN0cmVhbS51cmw7CiAgICAgIHZhciB0b2tlbiA9IHRoaXMuc3RyZWFtLnRva2VuOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkZWxldGVMb2dVUkwiKTsKICAgICAgYXhpb3MucG9zdChhY2Nlc3NVUkwsIHt9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogdG9rZW4KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZXRMb2dVUkwiLCByZXNwb25zZS5kYXRhLnVyaSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/LoggingStream.vue"],"names":[],"mappings":";AAWA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,OAAP,MAAoB,eAApB;AACA,SAAS,UAAT,QAA2B,MAA3B;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,eADQ;AAEd,EAAA,UAAU,EAAC;AACJ,IAAA,OAAO,EAAP;AADI,GAFG;AAKX,EAAA,IALW,kBAKL;AACF,WAAM;AACX,MAAA,MAAM,EAAE;AADG,KAAN;AAGH,GATU;AAUd,EAAA,OAVc,qBAUL;AACR;AACA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAK,sBAAlD;AACA,GAba;AAcX,EAAA,QAAQ,kCACP,UAAU,CAAC,CACb,mBADa,EAEb,WAFa,CAAD,CADH;AAKV,IAAA,QALU,sBAKA;AACT,aAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,KAA9B,CAAP;AACA;AAPS,IAdG;AAwBd,EAAA,KAAK,EAAC;AACL,IAAA,QAAQ,EAAE,kBAAS,EAAT,EAAa;AACtB,UAAI,EAAJ,EAAQ;AACP,aAAK,sBAAL;AACD,OAFA,MAEO;AACN,QAAA,OAAO,CAAC,GAAR,CAAY,eAAZ;AACD;AACA,KAPI;AAQL,IAAA,iBARK,6BAQa,EARb,EAQiB;AACrB,UAAI,EAAJ,EAAQ;AACP,QAAA,OAAO,CAAC,GAAR,CAAY,YAAZ,EAA0B,KAAK,iBAA/B,EAAkD,KAAK,SAAvD;AACD;AACA;AAZI,GAxBQ;AAuCd,EAAA,OAAO,EAAC;AACP,IAAA,sBADO,oCACiB;AACvB,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,KAA9B,CAAd;AACA,UAAI,SAAQ,GAAI,KAAK,MAAL,CAAY,GAA5B;AACA,UAAI,KAAI,GAAI,KAAK,MAAL,CAAY,KAAxB;;AACA,UAAI,KAAI,GAAI,IAAZ;;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,cAArB;AACA,MAAA,KAAI,CACH,IADD,CACM,SADN,EACiB,EADjB,EACqB;AAAE,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE;AAAjB;AAAX,OADrB,EAEC,IAFD,CAEM,UAAC,QAAD,EAAc;AACnB,QAAA,KAAK,CAAC,MAAN,CAAa,QAAb,CAAsB,WAAtB,EAAmC,QAAQ,CAAC,IAAT,CAAc,GAAjD;AACA,OAJD,EAKC,KALD,CAKO,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OALP;AAMD;AAbO;AAvCM,CAAf","sourcesContent":["//vue3 update\n\n<template>\n\n    <div>\n\t\t<logging :url=\"getLogURL\"/>\n\t</div>\n\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Logging from \"./Logging.vue\";\nimport { mapGetters } from 'vuex';\n\nexport default {\n\tname: \"LoggingStream\",\n\tcomponents:{\n        Logging,\n\t},\n    data(){\n        return{\n\t\t\tstream: Object,\n        }\n    },\n\tmounted(){\n\t\t//make second and subsequent connections\n\t\tdocument.addEventListener(\"streams:dropped\", this.getWebsocketConnection);\n\t},\n    computed:{\n\t\t...mapGetters([\n\t\t\t'getLogURLObtained',\n\t\t\t'getLogURL',\n        ]),\n\t\tstreamOK(){\n\t\t\treturn this.$store.getters.getStream(\"log\");\n\t\t},\n\t\t\n\t},\n\twatch:{\n\t\tstreamOK: function(is) {\n\t\t\tif (is) {\n\t\t\t\tthis.getWebsocketConnection();\n\t\t\t} else {\n\t\t\t\tconsole.log(\"no log stream\");\n\t\t\t}\n\t\t},\n\t\tgetLogURLObtained(is) {\n\t\t\tif (is) {\n\t\t\t\tconsole.log(\"get logURL\", this.getLogURLObtained, this.getLogURL);\n\t\t\t}\n\t\t},\n\n\t},\n\tmethods:{\n\t\tgetWebsocketConnection(){\n\t\t\tthis.stream = this.$store.getters.getStream(\"log\");\n\t\t\tvar accessURL = this.stream.url;\n\t\t\tvar token = this.stream.token;\n\t\t\tlet _this = this;\n\t\t\tthis.$store.dispatch(\"deleteLogURL\");\n\t\t\taxios\n\t\t\t.post(accessURL, {}, { headers: { Authorization: token } })\n\t\t\t.then((response) => {\n\t\t\t\t_this.$store.dispatch(\"setLogURL\", response.data.uri);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t},\n\t\n\t\n}\n\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}]}