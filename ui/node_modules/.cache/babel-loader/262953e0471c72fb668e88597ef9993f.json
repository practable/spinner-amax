{"remainingRequest":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/practable/spinner-amax/ui/src/components/RampCommand.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/practable/spinner-amax/ui/src/components/RampCommand.vue","mtime":1653472124341},{"path":"/home/david/practable/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvcHJhY3RhYmxlL3NwaW5uZXItYW1heC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdSYW1wQ29tbWFuZCcsCiAgcHJvcHM6IHsKICAgIG1vZGU6IFN0cmluZwogIH0sCiAgZW1pdHM6IFsnc2hvd2lucHV0dHlwZSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByYW1wX2dyYWRpZW50OiAxLjAwLAogICAgICBtYXhfcG9zaXRpb25fcmFtcDogNi4wMCwKICAgICAgbWF4X3NwZWVkX3JhbXA6IDEwMCwKICAgICAgbWF4X3ZvbHRhZ2VfcmFtcDogMTAsCiAgICAgIGlzUmFtcFJ1bm5pbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydnZXRDdXJyZW50TW9kZSddKSksCiAgd2F0Y2g6IHt9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ3NldERyYWdnYWJsZSddKSksIHt9LCB7CiAgICBydW5SYW1wOiBmdW5jdGlvbiBydW5SYW1wKCkgewogICAgICB0aGlzLiRlbWl0KCdzaG93aW5wdXR0eXBlJywgZmFsc2UpOwoKICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0SXNEYXRhUmVjb3JkZXJPbikgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRJc1JlY29yZGluZycsIHRydWUpOwogICAgICB9CgogICAgICBpZiAodGhpcy5tb2RlID09ICdwb3NpdGlvblBpZCcpIHsKICAgICAgICB0aGlzLmlzUmFtcFJ1bm5pbmcgPSB0cnVlOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRQb3NpdGlvblJhbXAnLCB0aGlzLnJhbXBfZ3JhZGllbnQpOwogICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PSAnc3BlZWRQaWQnKSB7CiAgICAgICAgdGhpcy5pc1JhbXBSdW5uaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0U3BlZWRSYW1wJywgdGhpcy5yYW1wX2dyYWRpZW50KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT0gJ3NwZWVkUmF3JykgewogICAgICAgIHRoaXMuaXNSYW1wUnVubmluZyA9IHRydWU7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFZvbHRhZ2VSYW1wJywgdGhpcy5yYW1wX2dyYWRpZW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzUmFtcFJ1bm5pbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0SXNSZWNvcmRpbmcnLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZGRNdWx0aXBsZUFjaGlldmVtZW50JywgJ211bHRpcGxlLXJ1bnMnKTsKICAgIH0sCiAgICBzdG9wUmFtcDogZnVuY3Rpb24gc3RvcFJhbXAoKSB7CiAgICAgIHRoaXMuaXNSYW1wUnVubmluZyA9IGZhbHNlOwogICAgICB0aGlzLiRlbWl0KCdzaG93aW5wdXR0eXBlJywgdHJ1ZSk7CgogICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRJc1JlY29yZGluZykgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRJc1JlY29yZGluZycsIGZhbHNlKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubW9kZSA9PSAncG9zaXRpb25QaWQnKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3dhaXQnKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT0gJ3NwZWVkUmF3JykgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRWb2x0YWdlJywgMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3dhaXQnKTsKICAgICAgfQogICAgfQogIH0pCn07"},{"version":3,"sources":["/home/david/practable/spinner-amax/ui/src/components/RampCommand.vue"],"names":[],"mappings":";AAoCA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AAEA,eAAe;AAEb,EAAA,IAAI,EAAE,aAFO;AAGb,EAAA,KAAK,EAAC;AACF,IAAA,IAAI,EAAE;AADJ,GAHO;AAMb,EAAA,KAAK,EAAC,CAAC,eAAD,CANO;AAOb,EAAA,IAPa,kBAOL;AACN,WAAO;AACH,MAAA,aAAa,EAAE,IADZ;AAEH,MAAA,iBAAiB,EAAE,IAFhB;AAGH,MAAA,cAAc,EAAE,GAHb;AAIH,MAAA,gBAAgB,EAAE,EAJf;AAKH,MAAA,aAAa,EAAE;AALZ,KAAP;AAOD,GAfY;AAgBb,EAAA,QAAQ,oBACD,UAAU,CAAC,CACV,gBADU,CAAD,CADT,CAhBK;AAqBb,EAAA,KAAK,EAAC,EArBO;AAwBb,EAAA,OAAO,kCACA,UAAU,CAAC,CACV,cADU,CAAD,CADV;AAIL,IAAA,OAJK,qBAII;AAEL,WAAK,KAAL,CAAW,eAAX,EAA4B,KAA5B;;AAEA,UAAG,KAAK,MAAL,CAAY,OAAZ,CAAoB,mBAAvB,EAA2C;AACvC,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,IAAvC;AACJ;;AAEA,UAAG,KAAK,IAAL,IAAa,aAAhB,EAA8B;AAC1B,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,iBAArB,EAAwC,KAAK,aAA7C;AACJ,OAHA,MAIK,IAAG,KAAK,IAAL,IAAa,UAAhB,EAA2B;AAC5B,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,cAArB,EAAqC,KAAK,aAA1C;AACJ,OAHK,MAIA,IAAG,KAAK,IAAL,IAAa,UAAhB,EAA2B;AAC5B,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,KAAK,aAA5C;AACJ,OAHK,MAGC;AACF,aAAK,aAAL,GAAqB,KAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,KAAvC;AACJ;;AAEA,WAAK,MAAL,CAAY,QAAZ,CAAqB,wBAArB,EAA8C,eAA9C;AACH,KA7BI;AA8BL,IAAA,QA9BK,sBA8BK;AACN,WAAK,aAAL,GAAqB,KAArB;AAEA,WAAK,KAAL,CAAW,eAAX,EAA4B,IAA5B;;AAEA,UAAG,KAAK,MAAL,CAAY,OAAZ,CAAoB,cAAvB,EAAsC;AAClC,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,KAAvC;AACJ;;AAEA,UAAG,KAAK,IAAL,IAAa,aAAhB,EAA8B;AACtB,aAAK,MAAL,CAAY,QAAZ,CAAqB,MAArB;AACJ,OAFJ,MAEW,IAAG,KAAK,IAAL,IAAa,UAAhB,EAA2B;AAC9B,aAAK,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC,CAAnC;AACJ,OAFO,MAEA;AACH,aAAK,MAAL,CAAY,QAAZ,CAAqB,MAArB;AACJ;AAER;AA/CK;AAxBM,CAAf","sourcesContent":["//vue3 update\n//Firmware has been updated to include a ramp function\n//This component now just needs to send a slightly different command to the firmware.\n\n<template>\n    <div class=\"row d-flex justify-content-center m-4\" @mousedown=\"setDraggable(false)\" @mouseup=\"setDraggable(true)\">  \n            <div class='col-auto'>\n                <div class='input-group' v-if='mode == \"speedRaw\"'>\n                    <span class='input-group-text' for=\"ramp_gradient\"><b>Ramp gradient (Vs<sup>-1</sup>)</b></span>\n                    <input type=\"number\" :max='max_voltage_ramp' :min='-max_voltage_ramp' :class=\"(parseFloat(ramp_gradient) >= -max_voltage_ramp && parseFloat(ramp_gradient) <= max_voltage_ramp) ? 'form-control' : 'form-control is-invalid'\" id=\"ramp_gradient\" v-model=\"ramp_gradient\">\n                    <button class='btn btn-lg' id=\"run\" v-if='!isRampRunning' @click=\"runRamp\">Run</button>\n                    <button class='btn btn-lg btn-danger' v-else id=\"stop\" @click=\"stopRamp\">Stop</button>\n                </div>\n\n                <div class='input-group' v-else-if='mode == \"speedPid\"'>\n                    <span class='input-group-text' for=\"ramp_gradient\"><b>Ramp gradient (rads<sup>-2</sup>)</b></span>\n                     <input type=\"number\" :max='max_speed_ramp' :min='-max_speed_ramp' :class=\"(parseFloat(ramp_gradient) >= -max_speed_ramp && parseFloat(ramp_gradient) <= max_speed_ramp) ? 'form-control' : 'form-control is-invalid'\" id=\"ramp_gradient\" v-model=\"ramp_gradient\">\n                     <button class='btn btn-lg' id=\"run\" v-if='!isRampRunning' @click=\"runRamp\">Run</button>\n                     <button class='btn btn-lg btn-danger' v-else id=\"stop\" @click=\"stopRamp\">Stop</button>\n                </div>\n\n                <div class='input-group' v-else-if='mode == \"positionPid\"'>\n                    <span class='input-group-text' for=\"ramp_gradient\"><b>Ramp gradient (rads<sup>-1</sup>)</b></span>\n                    <input type=\"number\" :max='max_position_ramp' :min='-max_position_ramp' :class=\"(parseFloat(ramp_gradient) >= -max_position_ramp && parseFloat(ramp_gradient) <= max_position_ramp) ? 'form-control' : 'form-control is-invalid'\" id=\"ramp_gradient\" v-model=\"ramp_gradient\">\n                    <button class='btn btn-lg' id=\"run\" v-if='!isRampRunning' @click=\"runRamp(); this.$store.dispatch('setAchievementCompleted', 'positionPid-ramp-input')\">Run</button>\n                    <button class='btn btn-lg btn-danger' v-else id=\"stop\" @click=\"stopRamp\">Stop</button>\n                </div>\n\n\n            </div>\n\n\n     </div>   \n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n\n  name: 'RampCommand',\n  props:{\n      mode: String,\n  },\n  emits:['showinputtype'],\n  data () {\n    return {\n        ramp_gradient: 1.00,            \n        max_position_ramp: 6.00,\n        max_speed_ramp: 100,\n        max_voltage_ramp: 10,\n        isRampRunning: false,\n    }\n  },\n  computed:{\n      ...mapGetters([\n          'getCurrentMode'\n      ])\n  },\n  watch:{\n    \n  },\n  methods: {\n      ...mapActions([\n          'setDraggable'\n      ]),\n    runRamp(){\n\n        this.$emit('showinputtype', false);\n\n        if(this.$store.getters.getIsDataRecorderOn){\n            this.$store.dispatch('setIsRecording', true);\n        }\n\n        if(this.mode == 'positionPid'){\n            this.isRampRunning = true;\n            this.$store.dispatch('setPositionRamp', this.ramp_gradient);\n        } \n        else if(this.mode == 'speedPid'){\n            this.isRampRunning = true;\n            this.$store.dispatch('setSpeedRamp', this.ramp_gradient);\n        } \n        else if(this.mode == 'speedRaw'){\n            this.isRampRunning = true;\n            this.$store.dispatch('setVoltageRamp', this.ramp_gradient);\n        } else{\n            this.isRampRunning = false;\n            this.$store.dispatch('setIsRecording', false);\n        }\n    \n        this.$store.dispatch('addMultipleAchievement','multiple-runs');\n    },\n    stopRamp(){\n        this.isRampRunning = false;\n\n        this.$emit('showinputtype', true);\n\n        if(this.$store.getters.getIsRecording){\n            this.$store.dispatch('setIsRecording', false);\n        }\n\n        if(this.mode == 'positionPid'){\n                this.$store.dispatch('wait');\n            } else if(this.mode == 'speedRaw'){\n                this.$store.dispatch('setVoltage', 0);\n            } else {\n                this.$store.dispatch('wait');\n            }\n        \n    }\n  }\n}\n</script>\n\n<style scoped>\ninput{\n    min-width: 20%;\n    max-width: 50%;\n}\n\n.error{\n    /* border:thick solid red */\n    border: auto;\n}\n\n.error:focus{\n    /* border:thick solid red */\n    border: auto;\n}\n\n#set       {background-color: rgb(74, 223, 37);}\n#set:hover {background-color: #0b7e0f} \n\n#run       {background-color:  rgb(74, 223, 37);}\n#run:hover {background-color: #0b7e0f} \n\n\n</style>"],"sourceRoot":""}]}