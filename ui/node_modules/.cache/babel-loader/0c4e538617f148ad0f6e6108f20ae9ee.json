{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js!/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/RampCommand.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/RampCommand.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvc3Bpbm5lci1hbWF4L3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1JhbXBDb21tYW5kJywKICBwcm9wczogewogICAgbW9kZTogU3RyaW5nCiAgfSwKICBlbWl0czogWydzaG93aW5wdXR0eXBlJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJhbXBfZ3JhZGllbnQ6IDEuMDAsCiAgICAgIG1heF9wb3NpdGlvbl9yYW1wOiA2LjAwLAogICAgICBtYXhfc3BlZWRfcmFtcDogMTAwLAogICAgICBtYXhfdm9sdGFnZV9yYW1wOiAxMCwKICAgICAgaXNSYW1wUnVubmluZzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2dldEN1cnJlbnRNb2RlJ10pKSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnc2V0RHJhZ2dhYmxlJ10pKSwge30sIHsKICAgIHJ1blJhbXA6IGZ1bmN0aW9uIHJ1blJhbXAoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3Nob3dpbnB1dHR5cGUnLCBmYWxzZSk7CgogICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRJc0RhdGFSZWNvcmRlck9uKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldElzUmVjb3JkaW5nJywgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1vZGUgPT0gJ3Bvc2l0aW9uUGlkJykgewogICAgICAgIHRoaXMuaXNSYW1wUnVubmluZyA9IHRydWU7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFBvc2l0aW9uUmFtcCcsIHRoaXMucmFtcF9ncmFkaWVudCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09ICdzcGVlZFBpZCcpIHsKICAgICAgICB0aGlzLmlzUmFtcFJ1bm5pbmcgPSB0cnVlOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRTcGVlZFJhbXAnLCB0aGlzLnJhbXBfZ3JhZGllbnQpOwogICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PSAnc3BlZWRSYXcnKSB7CiAgICAgICAgdGhpcy5pc1JhbXBSdW5uaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0Vm9sdGFnZVJhbXAnLCB0aGlzLnJhbXBfZ3JhZGllbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNSYW1wUnVubmluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRJc1JlY29yZGluZycsIGZhbHNlKTsKICAgICAgfQoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2FkZE11bHRpcGxlQWNoaWV2ZW1lbnQnLCAnbXVsdGlwbGUtcnVucycpOwogICAgfSwKICAgIHN0b3BSYW1wOiBmdW5jdGlvbiBzdG9wUmFtcCgpIHsKICAgICAgdGhpcy5pc1JhbXBSdW5uaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoJ3Nob3dpbnB1dHR5cGUnLCB0cnVlKTsKCiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldElzUmVjb3JkaW5nKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldElzUmVjb3JkaW5nJywgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAodGhpcy5tb2RlID09ICdwb3NpdGlvblBpZCcpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnd2FpdCcpOwogICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PSAnc3BlZWRSYXcnKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFZvbHRhZ2UnLCAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnd2FpdCcpOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/RampCommand.vue"],"names":[],"mappings":";AAoCA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AAEA,eAAe;AAEb,EAAA,IAAI,EAAE,aAFO;AAGb,EAAA,KAAK,EAAC;AACF,IAAA,IAAI,EAAE;AADJ,GAHO;AAMb,EAAA,KAAK,EAAC,CAAC,eAAD,CANO;AAOb,EAAA,IAPa,kBAOL;AACN,WAAO;AACH,MAAA,aAAa,EAAE,IADZ;AAEH,MAAA,iBAAiB,EAAE,IAFhB;AAGH,MAAA,cAAc,EAAE,GAHb;AAIH,MAAA,gBAAgB,EAAE,EAJf;AAKH,MAAA,aAAa,EAAE;AALZ,KAAP;AAOD,GAfY;AAgBb,EAAA,QAAQ,oBACD,UAAU,CAAC,CACV,gBADU,CAAD,CADT,CAhBK;AAqBb,EAAA,KAAK,EAAC,EArBO;AAwBb,EAAA,OAAO,kCACA,UAAU,CAAC,CACV,cADU,CAAD,CADV;AAIL,IAAA,OAJK,qBAII;AAEL,WAAK,KAAL,CAAW,eAAX,EAA4B,KAA5B;;AAEA,UAAG,KAAK,MAAL,CAAY,OAAZ,CAAoB,mBAAvB,EAA2C;AACvC,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,IAAvC;AACJ;;AAEA,UAAG,KAAK,IAAL,IAAa,aAAhB,EAA8B;AAC1B,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,iBAArB,EAAwC,KAAK,aAA7C;AACJ,OAHA,MAIK,IAAG,KAAK,IAAL,IAAa,UAAhB,EAA2B;AAC5B,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,cAArB,EAAqC,KAAK,aAA1C;AACJ,OAHK,MAIA,IAAG,KAAK,IAAL,IAAa,UAAhB,EAA2B;AAC5B,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,KAAK,aAA5C;AACJ,OAHK,MAGC;AACF,aAAK,aAAL,GAAqB,KAArB;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,KAAvC;AACJ;;AAEA,WAAK,MAAL,CAAY,QAAZ,CAAqB,wBAArB,EAA8C,eAA9C;AACH,KA7BI;AA8BL,IAAA,QA9BK,sBA8BK;AACN,WAAK,aAAL,GAAqB,KAArB;AAEA,WAAK,KAAL,CAAW,eAAX,EAA4B,IAA5B;;AAEA,UAAG,KAAK,MAAL,CAAY,OAAZ,CAAoB,cAAvB,EAAsC;AAClC,aAAK,MAAL,CAAY,QAAZ,CAAqB,gBAArB,EAAuC,KAAvC;AACJ;;AAEA,UAAG,KAAK,IAAL,IAAa,aAAhB,EAA8B;AACtB,aAAK,MAAL,CAAY,QAAZ,CAAqB,MAArB;AACJ,OAFJ,MAEW,IAAG,KAAK,IAAL,IAAa,UAAhB,EAA2B;AAC9B,aAAK,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC,CAAnC;AACJ,OAFO,MAEA;AACH,aAAK,MAAL,CAAY,QAAZ,CAAqB,MAArB;AACJ;AAER;AA/CK;AAxBM,CAAf","sourcesContent":["//vue3 update\n//Firmware has been updated to include a ramp function\n//This component now just needs to send a slightly different command to the firmware.\n\n<template>\n    <div class=\"row d-flex justify-content-center m-4\" @mousedown=\"setDraggable(false)\" @mouseup=\"setDraggable(true)\">  \n            <div class='col-auto'>\n                <div class='input-group' v-if='mode == \"speedRaw\"'>\n                    <span class='input-group-text' for=\"ramp_gradient\"><b>Ramp gradient (Vs<sup>-1</sup>)</b></span>\n                    <input type=\"number\" :max='max_voltage_ramp' :min='-max_voltage_ramp' :class=\"(parseFloat(ramp_gradient) >= -max_voltage_ramp && parseFloat(ramp_gradient) <= max_voltage_ramp) ? 'form-control' : 'form-control is-invalid'\" id=\"ramp_gradient\" v-model=\"ramp_gradient\">\n                    <button class='btn btn-lg' id=\"run\" v-if='!isRampRunning' @click=\"runRamp\">Run</button>\n                    <button class='btn btn-lg btn-danger' v-else id=\"stop\" @click=\"stopRamp\">Stop</button>\n                </div>\n\n                <div class='input-group' v-else-if='mode == \"speedPid\"'>\n                    <span class='input-group-text' for=\"ramp_gradient\"><b>Ramp gradient (rads<sup>-2</sup>)</b></span>\n                     <input type=\"number\" :max='max_speed_ramp' :min='-max_speed_ramp' :class=\"(parseFloat(ramp_gradient) >= -max_speed_ramp && parseFloat(ramp_gradient) <= max_speed_ramp) ? 'form-control' : 'form-control is-invalid'\" id=\"ramp_gradient\" v-model=\"ramp_gradient\">\n                     <button class='btn btn-lg' id=\"run\" v-if='!isRampRunning' @click=\"runRamp\">Run</button>\n                     <button class='btn btn-lg btn-danger' v-else id=\"stop\" @click=\"stopRamp\">Stop</button>\n                </div>\n\n                <div class='input-group' v-else-if='mode == \"positionPid\"'>\n                    <span class='input-group-text' for=\"ramp_gradient\"><b>Ramp gradient (rads<sup>-1</sup>)</b></span>\n                    <input type=\"number\" :max='max_position_ramp' :min='-max_position_ramp' :class=\"(parseFloat(ramp_gradient) >= -max_position_ramp && parseFloat(ramp_gradient) <= max_position_ramp) ? 'form-control' : 'form-control is-invalid'\" id=\"ramp_gradient\" v-model=\"ramp_gradient\">\n                    <button class='btn btn-lg' id=\"run\" v-if='!isRampRunning' @click=\"runRamp(); this.$store.dispatch('setAchievementCompleted', 'positionPid-ramp-input')\">Run</button>\n                    <button class='btn btn-lg btn-danger' v-else id=\"stop\" @click=\"stopRamp\">Stop</button>\n                </div>\n\n\n            </div>\n\n\n     </div>   \n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n\n  name: 'RampCommand',\n  props:{\n      mode: String,\n  },\n  emits:['showinputtype'],\n  data () {\n    return {\n        ramp_gradient: 1.00,            \n        max_position_ramp: 6.00,\n        max_speed_ramp: 100,\n        max_voltage_ramp: 10,\n        isRampRunning: false,\n    }\n  },\n  computed:{\n      ...mapGetters([\n          'getCurrentMode'\n      ])\n  },\n  watch:{\n    \n  },\n  methods: {\n      ...mapActions([\n          'setDraggable'\n      ]),\n    runRamp(){\n\n        this.$emit('showinputtype', false);\n\n        if(this.$store.getters.getIsDataRecorderOn){\n            this.$store.dispatch('setIsRecording', true);\n        }\n\n        if(this.mode == 'positionPid'){\n            this.isRampRunning = true;\n            this.$store.dispatch('setPositionRamp', this.ramp_gradient);\n        } \n        else if(this.mode == 'speedPid'){\n            this.isRampRunning = true;\n            this.$store.dispatch('setSpeedRamp', this.ramp_gradient);\n        } \n        else if(this.mode == 'speedRaw'){\n            this.isRampRunning = true;\n            this.$store.dispatch('setVoltageRamp', this.ramp_gradient);\n        } else{\n            this.isRampRunning = false;\n            this.$store.dispatch('setIsRecording', false);\n        }\n    \n        this.$store.dispatch('addMultipleAchievement','multiple-runs');\n    },\n    stopRamp(){\n        this.isRampRunning = false;\n\n        this.$emit('showinputtype', true);\n\n        if(this.$store.getters.getIsRecording){\n            this.$store.dispatch('setIsRecording', false);\n        }\n\n        if(this.mode == 'positionPid'){\n                this.$store.dispatch('wait');\n            } else if(this.mode == 'speedRaw'){\n                this.$store.dispatch('setVoltage', 0);\n            } else {\n                this.$store.dispatch('wait');\n            }\n        \n    }\n  }\n}\n</script>\n\n<style scoped>\ninput{\n    min-width: 20%;\n    max-width: 50%;\n}\n\n.error{\n    /* border:thick solid red */\n    border: auto;\n}\n\n.error:focus{\n    /* border:thick solid red */\n    border: auto;\n}\n\n#set       {background-color: rgb(74, 223, 37);}\n#set:hover {background-color: #0b7e0f} \n\n#run       {background-color:  rgb(74, 223, 37);}\n#run:hover {background-color: #0b7e0f} \n\n\n</style>"],"sourceRoot":""}]}