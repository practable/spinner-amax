{"remainingRequest":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/practable/spinner-amax/ui/src/components/DataStream.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/practable/spinner-amax/ui/src/components/DataStream.vue","mtime":1653472124341},{"path":"/home/david/practable/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvcHJhY3RhYmxlL3NwaW5uZXItYW1heC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBDb250cm9sUGFuZWxTcGlubmluZ0Rpc2sgZnJvbSAiLi9Db250cm9sUGFuZWxTcGlubmluZ0Rpc2sudnVlIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRhdGFTdHJlYW0iLAogIGNvbXBvbmVudHM6IHsKICAgIENvbnRyb2xQYW5lbFNwaW5uaW5nRGlzazogQ29udHJvbFBhbmVsU3Bpbm5pbmdEaXNrCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RyZWFtOiBPYmplY3QKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gdmFyIF90aGlzID0gdGhpczsKICAgIC8vIHZhciByZWNvbm5lY3QgPSBmdW5jdGlvbigpIHsKICAgIC8vIAljb25zb2xlLmxvZygncmVjb25uZWN0IHJ1bm5pbmcnKTsKICAgIC8vIAlfdGhpcy5nZXRXZWJzb2NrZXRDb25uZWN0aW9uKCk7CiAgICAvLyB9OwogICAgLy9tYWtlIHNlY29uZCBhbmQgc3Vic2VxdWVudCBjb25uZWN0aW9ucwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic3RyZWFtczpkcm9wcGVkIiwgdGhpcy5nZXRXZWJzb2NrZXRDb25uZWN0aW9uKTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgdXJsT0s6ICdnZXREYXRhVVJMT2J0YWluZWQnLAogICAgdXJsOiAnZ2V0RGF0YVVSTCcsCiAgICB2ZXJzaW9uOiAnZ2V0UmVtb3RlTGFiVmVyc2lvbicKICB9KSksIHt9LCB7CiAgICBzdHJlYW1PSzogZnVuY3Rpb24gc3RyZWFtT0soKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFN0cmVhbSgiZGF0YSIpOwogICAgfQogIH0pLAogIHdhdGNoOiB7CiAgICBzdHJlYW1PSzogZnVuY3Rpb24gc3RyZWFtT0soaXMpIHsKICAgICAgaWYgKGlzKSB7CiAgICAgICAgdGhpcy5nZXRXZWJzb2NrZXRDb25uZWN0aW9uKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIm5vIHN0cmVhbSIpOwogICAgICB9CiAgICB9LAogICAgdXJsT0s6IGZ1bmN0aW9uIHVybE9LKGlzKSB7CiAgICAgIGlmIChpcykgewogICAgICAgIGNvbnNvbGUubG9nKCJnZXQgZGF0YVVSTCIsIHRoaXMudXJsT0ssIHRoaXMudXJsKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0V2Vic29ja2V0Q29ubmVjdGlvbjogZnVuY3Rpb24gZ2V0V2Vic29ja2V0Q29ubmVjdGlvbigpIHsKICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFN0cmVhbSgiZGF0YSIpOwogICAgICB2YXIgYWNjZXNzVVJMID0gdGhpcy5zdHJlYW0udXJsOwogICAgICB2YXIgdG9rZW4gPSB0aGlzLnN0cmVhbS50b2tlbjsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGVsZXRlRGF0YVVSTCIpOwogICAgICBheGlvcy5wb3N0KGFjY2Vzc1VSTCwge30sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0b2tlbgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNldERhdGFVUkwiLCByZXNwb25zZS5kYXRhLnVyaSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/david/practable/spinner-amax/ui/src/components/DataStream.vue"],"names":[],"mappings":";AAWA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,wBAAP,MAAqC,gCAArC;AACA,SAAS,UAAT,QAA2B,MAA3B;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,YADQ;AAEd,EAAA,UAAU,EAAC;AACJ,IAAA,wBAAwB,EAAxB;AADI,GAFG;AAKX,EAAA,IALW,kBAKL;AACF,WAAM;AACX,MAAA,MAAM,EAAE;AADG,KAAN;AAGH,GATU;AAUd,EAAA,OAVc,qBAUL;AACR;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAK,sBAAlD;AACA,GAlBa;AAmBX,EAAA,QAAQ,kCACP,UAAU,CAAC;AACb,IAAA,KAAK,EAAE,oBADM;AAEb,IAAA,GAAG,EAAE,YAFQ;AAGb,IAAA,OAAO,EAAE;AAHI,GAAD,CADH;AAMV,IAAA,QANU,sBAMA;AACT,aAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,MAA9B,CAAP;AACA;AARS,IAnBG;AA8Bd,EAAA,KAAK,EAAC;AACL,IAAA,QAAQ,EAAE,kBAAS,EAAT,EAAa;AACtB,UAAI,EAAJ,EAAQ;AACP,aAAK,sBAAL;AACD,OAFA,MAEO;AACN,QAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AACD;AACA,KAPI;AAQL,IAAA,KARK,iBAQC,EARD,EAQK;AACT,UAAI,EAAJ,EAAQ;AACP,QAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,KAAK,KAAhC,EAAuC,KAAK,GAA5C;AACD;AACA;AAZI,GA9BQ;AA6Cd,EAAA,OAAO,EAAC;AACP,IAAA,sBADO,oCACiB;AACvB,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,MAA9B,CAAd;AACA,UAAI,SAAQ,GAAI,KAAK,MAAL,CAAY,GAA5B;AACA,UAAI,KAAI,GAAI,KAAK,MAAL,CAAY,KAAxB;;AACA,UAAI,KAAI,GAAI,IAAZ;;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,eAArB;AACA,MAAA,KAAI,CACH,IADD,CACM,SADN,EACiB,EADjB,EACqB;AAAE,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE;AAAjB;AAAX,OADrB,EAEC,IAFD,CAEM,UAAC,QAAD,EAAc;AACnB,QAAA,KAAK,CAAC,MAAN,CAAa,QAAb,CAAsB,YAAtB,EAAoC,QAAQ,CAAC,IAAT,CAAc,GAAlD;AACA,OAJD,EAKC,KALD,CAKO,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OALP;AAMD;AAbO;AA7CM,CAAf","sourcesContent":["//vue3 update\n\n<template>\n\n    <div v-if='version == \"spinning_disk\"'>\n\t\t<control-panel-spinning-disk :url=\"url\"/>\n\t</div>\n\n</template>\n\n<script>\nimport axios from \"axios\";\nimport ControlPanelSpinningDisk from \"./ControlPanelSpinningDisk.vue\";\nimport { mapGetters } from 'vuex';\n\nexport default {\n\tname: \"DataStream\",\n\tcomponents:{\n        ControlPanelSpinningDisk,\n\t},\n    data(){\n        return{\n\t\t\tstream: Object,\n        }\n    },\n\tmounted(){\n\t\t// var _this = this;\n\t\t// var reconnect = function() {\n\t\t// \tconsole.log('reconnect running');\n\t\t// \t_this.getWebsocketConnection();\n\t\t// };\n\t\t//make second and subsequent connections\n\t\tdocument.addEventListener(\"streams:dropped\", this.getWebsocketConnection);\n\t},\n    computed:{\n\t\t...mapGetters({\n\t\t\turlOK: 'getDataURLObtained',\n\t\t\turl: 'getDataURL',\n\t\t\tversion: 'getRemoteLabVersion',\n\t\t}),\n\t\tstreamOK(){\n\t\t\treturn this.$store.getters.getStream(\"data\");\n\t\t},\n\t\t\n\t},\n\twatch:{\n\t\tstreamOK: function(is) {\n\t\t\tif (is) {\n\t\t\t\tthis.getWebsocketConnection();\n\t\t\t} else {\n\t\t\t\tconsole.log(\"no stream\");\n\t\t\t}\n\t\t},\n\t\turlOK(is) {\n\t\t\tif (is) {\n\t\t\t\tconsole.log(\"get dataURL\", this.urlOK, this.url);\n\t\t\t}\n\t\t},\n\n\t},\n\tmethods:{\n\t\tgetWebsocketConnection(){\n\t\t\tthis.stream = this.$store.getters.getStream(\"data\");\n\t\t\tvar accessURL = this.stream.url;\n\t\t\tvar token = this.stream.token;\n\t\t\tlet _this = this;\n\t\t\tthis.$store.dispatch(\"deleteDataURL\");\t\t\n\t\t\taxios\n\t\t\t.post(accessURL, {}, { headers: { Authorization: token } })\n\t\t\t.then((response) => {\n\t\t\t\t_this.$store.dispatch(\"setDataURL\", response.data.uri);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t},\n\t\n\t\n}\n\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}]}