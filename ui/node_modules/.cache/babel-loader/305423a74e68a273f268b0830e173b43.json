{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js!/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/WebcamStream.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/WebcamStream.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvc3Bpbm5lci1hbWF4L3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFZpZGVvRWxlbWVudCBmcm9tICIuL1ZpZGVvRWxlbWVudC52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiV2ViY2FtU3RyZWFtIiwKICBjb21wb25lbnRzOiB7CiAgICBWaWRlb0VsZW1lbnQ6IFZpZGVvRWxlbWVudAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0cmVhbTogT2JqZWN0CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyh7CiAgICB1cmw6ICdnZXRWaWRlb1VSTCcsCiAgICB1cmxPSzogJ2dldFZpZGVvVVJMT2J0YWluZWQnCiAgfSkpLCB7fSwgewogICAgc3RyZWFtT0s6IGZ1bmN0aW9uIHN0cmVhbU9LKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTdHJlYW0oInZpZGVvIik7CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIHZhciBfdGhpcyA9IHRoaXM7CiAgICAvLyB2YXIgcmVjb25uZWN0ID0gZnVuY3Rpb24gKCkgewogICAgLy8gCV90aGlzLmFjY2Vzc1ZpZGVvKCk7CiAgICAvLyB9OwogICAgLy9tYWtlIHNlY29uZCBhbmQgc3Vic2VxdWVudCBjb25uZWN0aW9ucwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic3RyZWFtczpkcm9wcGVkIiwgdGhpcy5hY2Nlc3NWaWRlbyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhY2Nlc3NWaWRlbzogZnVuY3Rpb24gYWNjZXNzVmlkZW8oKSB7CiAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTdHJlYW0oInZpZGVvIik7CiAgICAgIHZhciBhY2Nlc3NVUkwgPSB0aGlzLnN0cmVhbS51cmw7CiAgICAgIHZhciB0b2tlbiA9IHRoaXMuc3RyZWFtLnRva2VuOwogICAgICB2YXIgc3RvcmUgPSB0aGlzLiRzdG9yZTsKICAgICAgc3RvcmUuZGlzcGF0Y2goImRlbGV0ZVZpZGVvVVJMIik7IC8vLy9USElTIEhBUyBCRUVOIEFEREVECgogICAgICBheGlvcy5wb3N0KGFjY2Vzc1VSTCwge30sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0b2tlbgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VmlkZW9VUkwiLCByZXNwb25zZS5kYXRhLnVyaSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc3RyZWFtT0s6IGZ1bmN0aW9uIHN0cmVhbU9LKGlzKSB7CiAgICAgIGlmIChpcykgewogICAgICAgIHRoaXMuYWNjZXNzVmlkZW8oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygibm8gc3RyZWFtIik7CiAgICAgIH0KICAgIH0sCiAgICB1cmxPSzogZnVuY3Rpb24gdXJsT0soaXMpIHsKICAgICAgaWYgKGlzKSB7CiAgICAgICAgY29uc29sZS5sb2coImdldCB2aWRlb1VSTCIsIHRoaXMudXJsT0ssIHRoaXMudXJsKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/WebcamStream.vue"],"names":[],"mappings":";AAaA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP,MAAyB,oBAAzB;AACA,SAAS,UAAT,QAA2B,MAA3B;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,cADQ;AAEd,EAAA,UAAU,EAAC;AACV,IAAA,YAAY,EAAZ;AADU,GAFG;AAKX,EAAA,IALW,kBAKL;AACF,WAAM;AACX,MAAA,MAAM,EAAE;AADG,KAAN;AAGH,GATU;AAUX,EAAA,QAAQ,kCACP,UAAU,CAAC;AACb,IAAA,GAAG,EAAE,aADQ;AAEb,IAAA,KAAK,EAAE;AAFM,GAAD,CADH;AAKV,IAAA,QALU,sBAKA;AACT,aAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,OAA9B,CAAP;AACA;AAPS,IAVG;AAqBd,EAAA,OArBc,qBAqBL;AACR;AACA;AACA;AACA;AACA;AACA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAK,WAAlD;AACA,GA5Ba;AA6Bd,EAAA,OAAO,EAAC;AACP,IAAA,WADO,yBACM;AACZ,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,OAA9B,CAAd;AACC,UAAI,SAAQ,GAAI,KAAK,MAAL,CAAY,GAA5B;AACA,UAAI,KAAI,GAAI,KAAK,MAAL,CAAY,KAAxB;AACA,UAAI,KAAI,GAAI,KAAK,MAAjB;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,gBAAf,EALW,CAKwB;;AACnC,MAAA,KAAI,CACH,IADD,CACM,SADN,EACiB,EADjB,EACqB;AAAE,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE;AAAjB;AAAX,OADrB,EAEC,IAFD,CAEM,UAAC,QAAD,EAAc;AACnB,QAAA,KAAK,CAAC,QAAN,CAAe,aAAf,EAA8B,QAAQ,CAAC,IAAT,CAAc,GAA5C;AACA,OAJD,EAKC,KALD,CAKO,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OALP;AAMF;AAbO,GA7BM;AA4Cd,EAAA,KAAK,EAAC;AACL,IAAA,QAAQ,EAAE,kBAAS,EAAT,EAAa;AACtB,UAAI,EAAJ,EAAQ;AACP,aAAK,WAAL;AACD,OAFA,MAEM;AACL,QAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AACD;AACE,KAPE;AAQL,IAAA,KARK,iBAQC,EARD,EAQK;AACT,UAAI,EAAJ,EAAQ;AACP,QAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,KAAK,KAAjC,EAAwC,KAAK,GAA7C;AACD;AACA;AAZI;AA5CQ,CAAf","sourcesContent":["//Vue3 updated\n\n<template>\n<div class='container-sm m-2 bg-white border rounded'>\n<div class='row' id=\"video\">\n\t<div class='col-12'>\n\t\t<video-element :url=\"url\" />\n\t</div>\n</div>\n</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport VideoElement from \"./VideoElement.vue\";\nimport { mapGetters } from 'vuex';\n\nexport default {\n\tname: \"WebcamStream\",\n\tcomponents:{\n\t\tVideoElement,\n\t},\n    data(){\n        return{\n\t\t\tstream: Object,\n        }\n    },\n    computed:{\n\t\t...mapGetters({\n\t\t\turl: 'getVideoURL',\n\t\t\turlOK: 'getVideoURLObtained'\n\t\t}),\n\t\tstreamOK(){\t\t\t\n\t\t\treturn this.$store.getters.getStream(\"video\");\n\t\t},\n\t\t\n\t\t\n\t},\n\tmounted(){\n\t\t// var _this = this;\n\t\t// var reconnect = function () {\n\t\t// \t_this.accessVideo();\n\t\t// };\n\t\t//make second and subsequent connections\n\t\tdocument.addEventListener(\"streams:dropped\", this.accessVideo);\n\t},\n\tmethods:{\n\t\taccessVideo(){\n\t\t\tthis.stream = this.$store.getters.getStream(\"video\");\n\t\t\t\tvar accessURL = this.stream.url;\n\t\t\t\tvar token = this.stream.token;\n\t\t\t\tvar store = this.$store;\n\t\t\t\tstore.dispatch(\"deleteVideoURL\");\t\t////THIS HAS BEEN ADDED\n\t\t\t\taxios\n\t\t\t\t.post(accessURL, {}, { headers: { Authorization: token } })\n\t\t\t\t.then((response) => {\n\t\t\t\t\tstore.dispatch(\"setVideoURL\", response.data.uri);\n\t\t\t\t})\n\t\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t},\n\twatch:{\n\t\tstreamOK: function(is) {\n\t\t\tif (is) {\n\t\t\t\tthis.accessVideo();\n\t\t\t} else{\n\t\t\t\tconsole.log(\"no stream\");\n\t\t\t}\n    },\n\t\turlOK(is) {\n\t\t\tif (is) {\n\t\t\t\tconsole.log(\"get videoURL\", this.urlOK, this.url);\n\t\t\t} \n\t\t},\n\n\t}\n}\n\n\n</script>\n\n<style scoped>\n#video-canvas{\n\twidth:80%;\n\theight: 100%;\n}\n</style>"],"sourceRoot":""}]}