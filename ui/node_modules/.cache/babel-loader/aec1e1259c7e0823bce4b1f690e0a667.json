{"remainingRequest":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/practable/spinner-amax/ui/src/components/WebcamStream.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/practable/spinner-amax/ui/src/components/WebcamStream.vue","mtime":1653472124341},{"path":"/home/david/practable/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvcHJhY3RhYmxlL3NwaW5uZXItYW1heC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBWaWRlb0VsZW1lbnQgZnJvbSAiLi9WaWRlb0VsZW1lbnQudnVlIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIldlYmNhbVN0cmVhbSIsCiAgY29tcG9uZW50czogewogICAgVmlkZW9FbGVtZW50OiBWaWRlb0VsZW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHJlYW06IE9iamVjdAogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgdXJsOiAnZ2V0VmlkZW9VUkwnLAogICAgdXJsT0s6ICdnZXRWaWRlb1VSTE9idGFpbmVkJwogIH0pKSwge30sIHsKICAgIHN0cmVhbU9LOiBmdW5jdGlvbiBzdHJlYW1PSygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U3RyZWFtKCJ2aWRlbyIpOwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyB2YXIgX3RoaXMgPSB0aGlzOwogICAgLy8gdmFyIHJlY29ubmVjdCA9IGZ1bmN0aW9uICgpIHsKICAgIC8vIAlfdGhpcy5hY2Nlc3NWaWRlbygpOwogICAgLy8gfTsKICAgIC8vbWFrZSBzZWNvbmQgYW5kIHN1YnNlcXVlbnQgY29ubmVjdGlvbnMKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInN0cmVhbXM6ZHJvcHBlZCIsIHRoaXMuYWNjZXNzVmlkZW8pOwogIH0sCiAgbWV0aG9kczogewogICAgYWNjZXNzVmlkZW86IGZ1bmN0aW9uIGFjY2Vzc1ZpZGVvKCkgewogICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U3RyZWFtKCJ2aWRlbyIpOwogICAgICB2YXIgYWNjZXNzVVJMID0gdGhpcy5zdHJlYW0udXJsOwogICAgICB2YXIgdG9rZW4gPSB0aGlzLnN0cmVhbS50b2tlbjsKICAgICAgdmFyIHN0b3JlID0gdGhpcy4kc3RvcmU7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCJkZWxldGVWaWRlb1VSTCIpOyAvLy8vVEhJUyBIQVMgQkVFTiBBRERFRAoKICAgICAgYXhpb3MucG9zdChhY2Nlc3NVUkwsIHt9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogdG9rZW4KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldFZpZGVvVVJMIiwgcmVzcG9uc2UuZGF0YS51cmkpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHN0cmVhbU9LOiBmdW5jdGlvbiBzdHJlYW1PSyhpcykgewogICAgICBpZiAoaXMpIHsKICAgICAgICB0aGlzLmFjY2Vzc1ZpZGVvKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIm5vIHN0cmVhbSIpOwogICAgICB9CiAgICB9LAogICAgdXJsT0s6IGZ1bmN0aW9uIHVybE9LKGlzKSB7CiAgICAgIGlmIChpcykgewogICAgICAgIGNvbnNvbGUubG9nKCJnZXQgdmlkZW9VUkwiLCB0aGlzLnVybE9LLCB0aGlzLnVybCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/david/practable/spinner-amax/ui/src/components/WebcamStream.vue"],"names":[],"mappings":";AAaA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP,MAAyB,oBAAzB;AACA,SAAS,UAAT,QAA2B,MAA3B;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,cADQ;AAEd,EAAA,UAAU,EAAC;AACV,IAAA,YAAY,EAAZ;AADU,GAFG;AAKX,EAAA,IALW,kBAKL;AACF,WAAM;AACX,MAAA,MAAM,EAAE;AADG,KAAN;AAGH,GATU;AAUX,EAAA,QAAQ,kCACP,UAAU,CAAC;AACb,IAAA,GAAG,EAAE,aADQ;AAEb,IAAA,KAAK,EAAE;AAFM,GAAD,CADH;AAKV,IAAA,QALU,sBAKA;AACT,aAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,OAA9B,CAAP;AACA;AAPS,IAVG;AAqBd,EAAA,OArBc,qBAqBL;AACR;AACA;AACA;AACA;AACA;AACA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAK,WAAlD;AACA,GA5Ba;AA6Bd,EAAA,OAAO,EAAC;AACP,IAAA,WADO,yBACM;AACZ,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,OAA9B,CAAd;AACC,UAAI,SAAQ,GAAI,KAAK,MAAL,CAAY,GAA5B;AACA,UAAI,KAAI,GAAI,KAAK,MAAL,CAAY,KAAxB;AACA,UAAI,KAAI,GAAI,KAAK,MAAjB;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,gBAAf,EALW,CAKwB;;AACnC,MAAA,KAAI,CACH,IADD,CACM,SADN,EACiB,EADjB,EACqB;AAAE,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE;AAAjB;AAAX,OADrB,EAEC,IAFD,CAEM,UAAC,QAAD,EAAc;AACnB,QAAA,KAAK,CAAC,QAAN,CAAe,aAAf,EAA8B,QAAQ,CAAC,IAAT,CAAc,GAA5C;AACA,OAJD,EAKC,KALD,CAKO,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OALP;AAMF;AAbO,GA7BM;AA4Cd,EAAA,KAAK,EAAC;AACL,IAAA,QAAQ,EAAE,kBAAS,EAAT,EAAa;AACtB,UAAI,EAAJ,EAAQ;AACP,aAAK,WAAL;AACD,OAFA,MAEM;AACL,QAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AACD;AACE,KAPE;AAQL,IAAA,KARK,iBAQC,EARD,EAQK;AACT,UAAI,EAAJ,EAAQ;AACP,QAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,KAAK,KAAjC,EAAwC,KAAK,GAA7C;AACD;AACA;AAZI;AA5CQ,CAAf","sourcesContent":["//Vue3 updated\n\n<template>\n<div class='container-sm m-2 bg-white border rounded'>\n<div class='row' id=\"video\">\n\t<div class='col-12'>\n\t\t<video-element :url=\"url\" />\n\t</div>\n</div>\n</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport VideoElement from \"./VideoElement.vue\";\nimport { mapGetters } from 'vuex';\n\nexport default {\n\tname: \"WebcamStream\",\n\tcomponents:{\n\t\tVideoElement,\n\t},\n    data(){\n        return{\n\t\t\tstream: Object,\n        }\n    },\n    computed:{\n\t\t...mapGetters({\n\t\t\turl: 'getVideoURL',\n\t\t\turlOK: 'getVideoURLObtained'\n\t\t}),\n\t\tstreamOK(){\t\t\t\n\t\t\treturn this.$store.getters.getStream(\"video\");\n\t\t},\n\t\t\n\t\t\n\t},\n\tmounted(){\n\t\t// var _this = this;\n\t\t// var reconnect = function () {\n\t\t// \t_this.accessVideo();\n\t\t// };\n\t\t//make second and subsequent connections\n\t\tdocument.addEventListener(\"streams:dropped\", this.accessVideo);\n\t},\n\tmethods:{\n\t\taccessVideo(){\n\t\t\tthis.stream = this.$store.getters.getStream(\"video\");\n\t\t\t\tvar accessURL = this.stream.url;\n\t\t\t\tvar token = this.stream.token;\n\t\t\t\tvar store = this.$store;\n\t\t\t\tstore.dispatch(\"deleteVideoURL\");\t\t////THIS HAS BEEN ADDED\n\t\t\t\taxios\n\t\t\t\t.post(accessURL, {}, { headers: { Authorization: token } })\n\t\t\t\t.then((response) => {\n\t\t\t\t\tstore.dispatch(\"setVideoURL\", response.data.uri);\n\t\t\t\t})\n\t\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t},\n\twatch:{\n\t\tstreamOK: function(is) {\n\t\t\tif (is) {\n\t\t\t\tthis.accessVideo();\n\t\t\t} else{\n\t\t\t\tconsole.log(\"no stream\");\n\t\t\t}\n    },\n\t\turlOK(is) {\n\t\t\tif (is) {\n\t\t\t\tconsole.log(\"get videoURL\", this.urlOK, this.url);\n\t\t\t} \n\t\t},\n\n\t}\n}\n\n\n</script>\n\n<style scoped>\n#video-canvas{\n\twidth:80%;\n\theight: 100%;\n}\n</style>"],"sourceRoot":""}]}