{"remainingRequest":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/practable/spinner-amax/ui/src/components/LoggingStream.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/practable/spinner-amax/ui/src/components/LoggingStream.vue","mtime":1653472124341},{"path":"/home/david/practable/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvcHJhY3RhYmxlL3NwaW5uZXItYW1heC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBMb2dnaW5nIGZyb20gIi4vTG9nZ2luZy52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9nZ2luZ1N0cmVhbSIsCiAgY29tcG9uZW50czogewogICAgTG9nZ2luZzogTG9nZ2luZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0cmVhbTogT2JqZWN0CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vbWFrZSBzZWNvbmQgYW5kIHN1YnNlcXVlbnQgY29ubmVjdGlvbnMKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInN0cmVhbXM6ZHJvcHBlZCIsIHRoaXMuZ2V0V2Vic29ja2V0Q29ubmVjdGlvbik7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnZ2V0TG9nVVJMT2J0YWluZWQnLCAnZ2V0TG9nVVJMJ10pKSwge30sIHsKICAgIHN0cmVhbU9LOiBmdW5jdGlvbiBzdHJlYW1PSygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U3RyZWFtKCJsb2ciKTsKICAgIH0KICB9KSwKICB3YXRjaDogewogICAgc3RyZWFtT0s6IGZ1bmN0aW9uIHN0cmVhbU9LKGlzKSB7CiAgICAgIGlmIChpcykgewogICAgICAgIHRoaXMuZ2V0V2Vic29ja2V0Q29ubmVjdGlvbigpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJubyBsb2cgc3RyZWFtIik7CiAgICAgIH0KICAgIH0sCiAgICBnZXRMb2dVUkxPYnRhaW5lZDogZnVuY3Rpb24gZ2V0TG9nVVJMT2J0YWluZWQoaXMpIHsKICAgICAgaWYgKGlzKSB7CiAgICAgICAgY29uc29sZS5sb2coImdldCBsb2dVUkwiLCB0aGlzLmdldExvZ1VSTE9idGFpbmVkLCB0aGlzLmdldExvZ1VSTCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFdlYnNvY2tldENvbm5lY3Rpb246IGZ1bmN0aW9uIGdldFdlYnNvY2tldENvbm5lY3Rpb24oKSB7CiAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTdHJlYW0oImxvZyIpOwogICAgICB2YXIgYWNjZXNzVVJMID0gdGhpcy5zdHJlYW0udXJsOwogICAgICB2YXIgdG9rZW4gPSB0aGlzLnN0cmVhbS50b2tlbjsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGVsZXRlTG9nVVJMIik7CiAgICAgIGF4aW9zLnBvc3QoYWNjZXNzVVJMLCB7fSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IHRva2VuCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgic2V0TG9nVVJMIiwgcmVzcG9uc2UuZGF0YS51cmkpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/david/practable/spinner-amax/ui/src/components/LoggingStream.vue"],"names":[],"mappings":";AAWA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,OAAP,MAAoB,eAApB;AACA,SAAS,UAAT,QAA2B,MAA3B;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,eADQ;AAEd,EAAA,UAAU,EAAC;AACJ,IAAA,OAAO,EAAP;AADI,GAFG;AAKX,EAAA,IALW,kBAKL;AACF,WAAM;AACX,MAAA,MAAM,EAAE;AADG,KAAN;AAGH,GATU;AAUd,EAAA,OAVc,qBAUL;AACR;AACA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAK,sBAAlD;AACA,GAba;AAcX,EAAA,QAAQ,kCACP,UAAU,CAAC,CACb,mBADa,EAEb,WAFa,CAAD,CADH;AAKV,IAAA,QALU,sBAKA;AACT,aAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,KAA9B,CAAP;AACA;AAPS,IAdG;AAwBd,EAAA,KAAK,EAAC;AACL,IAAA,QAAQ,EAAE,kBAAS,EAAT,EAAa;AACtB,UAAI,EAAJ,EAAQ;AACP,aAAK,sBAAL;AACD,OAFA,MAEO;AACN,QAAA,OAAO,CAAC,GAAR,CAAY,eAAZ;AACD;AACA,KAPI;AAQL,IAAA,iBARK,6BAQa,EARb,EAQiB;AACrB,UAAI,EAAJ,EAAQ;AACP,QAAA,OAAO,CAAC,GAAR,CAAY,YAAZ,EAA0B,KAAK,iBAA/B,EAAkD,KAAK,SAAvD;AACD;AACA;AAZI,GAxBQ;AAuCd,EAAA,OAAO,EAAC;AACP,IAAA,sBADO,oCACiB;AACvB,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,KAA9B,CAAd;AACA,UAAI,SAAQ,GAAI,KAAK,MAAL,CAAY,GAA5B;AACA,UAAI,KAAI,GAAI,KAAK,MAAL,CAAY,KAAxB;;AACA,UAAI,KAAI,GAAI,IAAZ;;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,cAArB;AACA,MAAA,KAAI,CACH,IADD,CACM,SADN,EACiB,EADjB,EACqB;AAAE,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE;AAAjB;AAAX,OADrB,EAEC,IAFD,CAEM,UAAC,QAAD,EAAc;AACnB,QAAA,KAAK,CAAC,MAAN,CAAa,QAAb,CAAsB,WAAtB,EAAmC,QAAQ,CAAC,IAAT,CAAc,GAAjD;AACA,OAJD,EAKC,KALD,CAKO,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OALP;AAMD;AAbO;AAvCM,CAAf","sourcesContent":["//vue3 update\n\n<template>\n\n    <div>\n\t\t<logging :url=\"getLogURL\"/>\n\t</div>\n\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Logging from \"./Logging.vue\";\nimport { mapGetters } from 'vuex';\n\nexport default {\n\tname: \"LoggingStream\",\n\tcomponents:{\n        Logging,\n\t},\n    data(){\n        return{\n\t\t\tstream: Object,\n        }\n    },\n\tmounted(){\n\t\t//make second and subsequent connections\n\t\tdocument.addEventListener(\"streams:dropped\", this.getWebsocketConnection);\n\t},\n    computed:{\n\t\t...mapGetters([\n\t\t\t'getLogURLObtained',\n\t\t\t'getLogURL',\n        ]),\n\t\tstreamOK(){\n\t\t\treturn this.$store.getters.getStream(\"log\");\n\t\t},\n\t\t\n\t},\n\twatch:{\n\t\tstreamOK: function(is) {\n\t\t\tif (is) {\n\t\t\t\tthis.getWebsocketConnection();\n\t\t\t} else {\n\t\t\t\tconsole.log(\"no log stream\");\n\t\t\t}\n\t\t},\n\t\tgetLogURLObtained(is) {\n\t\t\tif (is) {\n\t\t\t\tconsole.log(\"get logURL\", this.getLogURLObtained, this.getLogURL);\n\t\t\t}\n\t\t},\n\n\t},\n\tmethods:{\n\t\tgetWebsocketConnection(){\n\t\t\tthis.stream = this.$store.getters.getStream(\"log\");\n\t\t\tvar accessURL = this.stream.url;\n\t\t\tvar token = this.stream.token;\n\t\t\tlet _this = this;\n\t\t\tthis.$store.dispatch(\"deleteLogURL\");\n\t\t\taxios\n\t\t\t.post(accessURL, {}, { headers: { Authorization: token } })\n\t\t\t.then((response) => {\n\t\t\t\t_this.$store.dispatch(\"setLogURL\", response.data.uri);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t},\n\t\n\t\n}\n\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}]}