{"remainingRequest":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/practable/spinner-amax/ui/src/components/VideoElement.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/practable/spinner-amax/ui/src/components/VideoElement.vue","mtime":1653472124341},{"path":"/home/david/practable/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvcHJhY3RhYmxlL3NwaW5uZXItYW1heC91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBKU01wZWcgZnJvbSAiQGN5Y2ppbW15L2pzbXBlZy1wbGF5ZXIiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBUb29sYmFyIGZyb20gIi4vZWxlbWVudHMvVG9vbGJhci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlZpZGVvRWxlbWVudCIsCiAgcHJvcHM6IFsidXJsIl0sCiAgY29tcG9uZW50czogewogICAgVG9vbGJhcjogVG9vbGJhcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYXllcjogbnVsbCwKICAgICAgY3VycmVudF92b2x1bWU6IDAuNSwKICAgICAgbXV0ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2dldFNlc3Npb25FeHBpcmVkJ10pKSwge30sIHsKICAgIGdldE11dGVkQ2xhc3M6IGZ1bmN0aW9uIGdldE11dGVkQ2xhc3MoKSB7CiAgICAgIGlmICh0aGlzLm11dGVkKSB7CiAgICAgICAgcmV0dXJuICdidG4gYnRuLXByaW1hcnknOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnknOwogICAgICB9CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsvL1RFTVAgaW4gbW91bnRlZAogICAgLy8gbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlby1jYW52YXMiKTsKICAgIC8vICAgICAvL3RlbXBvcmFyeSBzdGF0aWMgVVJMIGZvciB2aWRlbyBhY2Nlc3MKICAgIC8vICAgICBsZXQgdXJsID0gIndzczovL3ZpZGVvLnByYWN0YWJsZS5pbzo0NDMvaW4vZHByL3ZpZGVvMCI7CiAgICAvLyAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgSlNNcGVnLlBsYXllcih1cmwsIHtjYW52YXM6IGNhbnZhcywgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlfSk7CiAgfSwKICB3YXRjaDogewogICAgdXJsOiBmdW5jdGlvbiB1cmwoKSB7CiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlkZW8tY2FudmFzIik7CiAgICAgIHRoaXMucGxheWVyID0gbmV3IEpTTXBlZy5QbGF5ZXIodGhpcy51cmwsIHsKICAgICAgICBjYW52YXM6IGNhbnZhcywKICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuY3VycmVudF92b2x1bWUgPSB0aGlzLnBsYXllci52b2x1bWU7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRWb2x1bWU6IGZ1bmN0aW9uIHNldFZvbHVtZSh2YWx1ZSkgewogICAgICB0aGlzLnBsYXllci52b2x1bWUgPSB2YWx1ZTsKICAgICAgdGhpcy5jdXJyZW50X3ZvbHVtZSA9IHZhbHVlOwogICAgfSwKICAgIGluY3JlYXNlVm9sdW1lOiBmdW5jdGlvbiBpbmNyZWFzZVZvbHVtZSgpIHsKICAgICAgaWYgKHRoaXMubXV0ZWQpIHsKICAgICAgICB0aGlzLm11dGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmN1cnJlbnRfdm9sdW1lIDwgMSkgewogICAgICAgIHRoaXMuY3VycmVudF92b2x1bWUgKz0gMC4xOwogICAgICB9CgogICAgICBpZiAodGhpcy5jdXJyZW50X3ZvbHVtZSA+IDEwKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3ZvbHVtZSA9IDEwLjA7CiAgICAgIH0KCiAgICAgIHRoaXMucGxheWVyLnZvbHVtZSA9IHRoaXMuY3VycmVudF92b2x1bWU7CiAgICB9LAogICAgZGVjcmVhc2VWb2x1bWU6IGZ1bmN0aW9uIGRlY3JlYXNlVm9sdW1lKCkgewogICAgICBpZiAodGhpcy5tdXRlZCkgewogICAgICAgIHRoaXMubXV0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuY3VycmVudF92b2x1bWUgPiAwKSB7CiAgICAgICAgdGhpcy5jdXJyZW50X3ZvbHVtZSAtPSAwLjE7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmN1cnJlbnRfdm9sdW1lIDwgMCkgewogICAgICAgIHRoaXMuY3VycmVudF92b2x1bWUgPSAwOwogICAgICB9CgogICAgICB0aGlzLnBsYXllci52b2x1bWUgPSB0aGlzLmN1cnJlbnRfdm9sdW1lOwogICAgfSwKICAgIHRvZ2dsZU11dGU6IGZ1bmN0aW9uIHRvZ2dsZU11dGUoKSB7CiAgICAgIGlmICh0aGlzLm11dGVkKSB7CiAgICAgICAgdGhpcy5wbGF5ZXIudm9sdW1lID0gdGhpcy5jdXJyZW50X3ZvbHVtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBsYXllci52b2x1bWUgPSAwOwogICAgICB9CgogICAgICB0aGlzLm11dGVkID0gIXRoaXMubXV0ZWQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/david/practable/spinner-amax/ui/src/components/VideoElement.vue"],"names":[],"mappings":";AA8DA,OAAO,MAAP,MAAmB,yBAAnB;AACA,SAAS,UAAT,QAA2B,MAA3B;AACA,OAAO,OAAP,MAAoB,wBAApB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,cADO;AAEb,EAAA,KAAK,EAAE,CAAC,KAAD,CAFM;AAGb,EAAA,UAAU,EAAC;AACP,IAAA,OAAO,EAAP;AADO,GAHE;AAMb,EAAA,IANa,kBAMP;AACF,WAAM;AACJ,MAAA,MAAM,EAAE,IADJ;AAEJ,MAAA,cAAc,EAAE,GAFZ;AAGJ,MAAA,KAAK,EAAE;AAHH,KAAN;AAKD,GAZU;AAab,EAAA,QAAQ,kCACH,UAAU,CAAC,CACZ,mBADY,CAAD,CADP;AAIN,IAAA,aAJM,2BAIS;AACb,UAAG,KAAK,KAAR,EAAc;AACZ,eAAO,iBAAP;AACF,OAFA,MAEM;AACJ,eAAO,yBAAP;AACF;AACF;AAVM,IAbK;AAyBb,EAAA,OAzBa,qBAyBJ,CACP;AACA;AACA;AACA;AACA;AACD,GA/BY;AAgCb,EAAA,KAAK,EAAC;AACJ,IAAA,GADI,iBACC;AACD,UAAI,MAAK,GAAI,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAb;AACA,WAAK,MAAL,GAAc,IAAI,MAAM,CAAC,MAAX,CAAkB,KAAK,GAAvB,EAA4B;AAAC,QAAA,MAAM,EAAE,MAAT;AAAiB,QAAA,qBAAqB,EAAE;AAAxC,OAA5B,CAAd;AACA,WAAK,cAAL,GAAsB,KAAK,MAAL,CAAY,MAAlC;AACH;AALG,GAhCO;AAuCb,EAAA,OAAO,EAAC;AACN,IAAA,SADM,qBACI,KADJ,EACU;AACd,WAAK,MAAL,CAAY,MAAZ,GAAqB,KAArB;AACA,WAAK,cAAL,GAAsB,KAAtB;AACD,KAJK;AAKN,IAAA,cALM,4BAKU;AACd,UAAG,KAAK,KAAR,EAAc;AACZ,aAAK,KAAL,GAAa,KAAb;AACF;;AAEA,UAAG,KAAK,cAAL,GAAsB,CAAzB,EAA2B;AACzB,aAAK,cAAL,IAAuB,GAAvB;AACF;;AACA,UAAG,KAAK,cAAL,GAAsB,EAAzB,EAA4B;AAC1B,aAAK,cAAL,GAAsB,IAAtB;AACF;;AAEA,WAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,cAA1B;AACD,KAlBK;AAmBN,IAAA,cAnBM,4BAmBU;AACd,UAAG,KAAK,KAAR,EAAc;AACZ,aAAK,KAAL,GAAa,KAAb;AACF;;AAEA,UAAG,KAAK,cAAL,GAAsB,CAAzB,EAA2B;AACzB,aAAK,cAAL,IAAuB,GAAvB;AACF;;AACA,UAAG,KAAK,cAAL,GAAsB,CAAzB,EAA2B;AACzB,aAAK,cAAL,GAAsB,CAAtB;AACF;;AAEA,WAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,cAA1B;AACD,KAhCK;AAiCN,IAAA,UAjCM,wBAiCM;AACV,UAAG,KAAK,KAAR,EAAc;AACZ,aAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,cAA1B;AACF,OAFA,MAEM;AACJ,aAAK,MAAL,CAAY,MAAZ,GAAqB,CAArB;AACF;;AAEA,WAAK,KAAL,GAAa,CAAC,KAAK,KAAnB;AACD;AAzCK;AAvCK,CAAf","sourcesContent":["//Vue3 updated\n\n<template>\n\n<div v-if='getSessionExpired' class='row'>\n  <div class='col-12'>\n        <img id='session-end-image' src='https://assets.practable.io/images/common/thank-you-screen.svg' alt='session ended'>\n    </div>\n</div>\n<div v-else>\n  <div class='row' >\n      <div class='col-12' id='video-element'>\n        <canvas id=\"video-canvas\"></canvas>\n      </div>\n    </div>\n\n    <div class='row'>\n      <div class='col-6'>\n        <toolbar parentCanvasID=\"video-canvas\" parentComponentName=\"webcam\" parentDivID='video-element' :showDownload='true' :showPopupHelp='false' :showOptions=\"false\"></toolbar>\n      </div>\n\n      <div class=\"col-2\">\n        \n      </div>\n\n      <!-- <div class='col-4 d-flex flex-row-reverse'>\n       \n        <button :class='getMutedClass' @click='toggleMute'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-volume-mute\" viewBox=\"0 0 16 16\">\n            <path d=\"M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04 4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04zm7.854.606a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z\"/>\n          </svg>\n        </button>\n        <button class='btn btn-outline-primary' @click='increaseVolume'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-volume-up\" viewBox=\"0 0 16 16\">\n            <path d=\"M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z\"/>\n            <path d=\"M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z\"/>\n            <path d=\"M10.025 8a4.486 4.486 0 0 1-1.318 3.182L8 10.475A3.489 3.489 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.486 4.486 0 0 1 10.025 8zM7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12V4zM4.312 6.39 6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11z\"/>\n        </svg>\n        </button>\n        <button class='btn btn-outline-primary' @click='decreaseVolume'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-volume-down\" viewBox=\"0 0 16 16\">\n            <path d=\"M9 4a.5.5 0 0 0-.812-.39L5.825 5.5H3.5A.5.5 0 0 0 3 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 9 12V4zM6.312 6.39 8 5.04v5.92L6.312 9.61A.5.5 0 0 0 6 9.5H4v-3h2a.5.5 0 0 0 .312-.11zM12.025 8a4.486 4.486 0 0 1-1.318 3.182L10 10.475A3.489 3.489 0 0 0 11.025 8 3.49 3.49 0 0 0 10 5.525l.707-.707A4.486 4.486 0 0 1 12.025 8z\"/>\n        </svg>\n        </button>\n\n        <span class='pt-2 pe-2'>Volume: {{ current_volume.toFixed(1)*10 }}</span>\n        \n      </div>   -->\n        \n    </div>\n</div>    \n    \n    <!-- <div class='row' >\n      <div class='col-12' id='video-element'>\n        <canvas id=\"video-canvas\"></canvas>\n        <toolbar parentCanvasID=\"video-canvas\" parentComponentName=\"webcam\" parentDivID='video-element' :showDownload='true' :showPopupHelp='false' :showOptions=\"false\"></toolbar>\n      </div>\n    </div> -->\n    <!-- <div id='videoWrapper'></div> -->\n</template>\n\n<script>\nimport JSMpeg from \"@cycjimmy/jsmpeg-player\";\nimport { mapGetters } from 'vuex';\nimport Toolbar from \"./elements/Toolbar.vue\";\n\nexport default {\n  name: \"VideoElement\",\n  props: [\"url\"],\n  components:{\n      Toolbar,\n    },\n  data(){\n      return{\n        player: null,\n        current_volume: 0.5,\n        muted: false,\n      }\n    },\n  computed:{\n    ...mapGetters([\n      'getSessionExpired',\n    ]),\n    getMutedClass(){\n      if(this.muted){\n        return 'btn btn-primary';\n      } else{\n        return 'btn btn-outline-primary';\n      }\n    }\n  },\n  mounted(){\n    //TEMP in mounted\n    // let canvas = document.getElementById(\"video-canvas\");\n    //     //temporary static URL for video access\n    //     let url = \"wss://video.practable.io:443/in/dpr/video0\";\n    //     this.player = new JSMpeg.Player(url, {canvas: canvas, preserveDrawingBuffer: true});\n  },\n  watch:{\n    url(){\n        let canvas = document.getElementById(\"video-canvas\");\n        this.player = new JSMpeg.Player(this.url, {canvas: canvas, preserveDrawingBuffer: true});\n        this.current_volume = this.player.volume;\n    },\n  },\n  methods:{\n    setVolume(value){\n      this.player.volume = value;\n      this.current_volume = value;\n    },\n    increaseVolume(){\n      if(this.muted){\n        this.muted = false;\n      }\n  \n      if(this.current_volume < 1){\n        this.current_volume += 0.1;\n      }\n      if(this.current_volume > 10){\n        this.current_volume = 10.0;\n      }\n\n      this.player.volume = this.current_volume;\n    },\n    decreaseVolume(){\n      if(this.muted){\n        this.muted = false;\n      }\n  \n      if(this.current_volume > 0){\n        this.current_volume -= 0.1;\n      }\n      if(this.current_volume < 0){\n        this.current_volume = 0;\n      }\n\n      this.player.volume = this.current_volume;\n    },\n    toggleMute(){\n      if(this.muted){\n        this.player.volume = this.current_volume;\n      } else{\n        this.player.volume = 0;\n      }\n\n      this.muted = !this.muted;\n    },\n  }\n    \n};\n\n\n</script>\n\n<style>\n    #video-canvas {\n      width: 100%;\n      /* height: 100%; */\n    }\n\n    #session-end-image {\n      width: 100%;\n      /* height: 100%; */\n    }\n\n</style>"],"sourceRoot":""}]}