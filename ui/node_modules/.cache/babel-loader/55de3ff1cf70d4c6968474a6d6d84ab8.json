{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js!/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/Logging.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/Logging.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvc3Bpbm5lci1hbWF4L3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9nZ2luZycsCiAgcHJvcHM6IHsKICAgIHVybDogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9nU29ja2V0OiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIHdhdGNoOiB7CiAgICB1cmw6IGZ1bmN0aW9uIHVybCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodGhpcy51cmwgIT0gJycgJiYgdGhpcy5nZXRMb2dVUkxPYnRhaW5lZCkgewogICAgICAgICAgdGhpcy5jb25uZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdkaXNjb25uZWN0aW5nOiAnICsgdGhpcy51cmwpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgZ2V0U2Vzc2lvbkV4cGlyZWQ6IGZ1bmN0aW9uIGdldFNlc3Npb25FeHBpcmVkKGV4cGlyZWQpIHsKICAgICAgaWYgKGV4cGlyZWQpIHsKICAgICAgICB0aGlzLmxvZ0VuZCh7CiAgICAgICAgICBsb2c6ICdlbmQnLAogICAgICAgICAgdHlwZTogJ3Nlc3Npb24tZXhwJywKICAgICAgICAgIGRhdGE6IERhdGUubm93KCkKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydnZXRMb2dVUkxPYnRhaW5lZCcsICdnZXRMb2dTdGFydCcsIC8vJ2dldExvZ0NsaWNrcycsCiAgLy8nZ2V0TG9nUGFyYW1ldGVycycsCiAgJ2dldExvZ1RvdGFsVGltZScsICdnZXRQcm9tcHRCeU5hbWUnLCAnZ2V0UHJvbXB0cycsICdnZXRBY2hpZXZlbWVudEJ5TmFtZScsICdnZXRMb2dDb25zZW50JywgJ2dldFN1cnZleUNvbnNlbnQnLCAnZ2V0U2Vzc2lvbkV4cGlyZWQnXSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ2xvZ0NsaWNrJywgJ2xvZ1N0YXJ0JywgJ2xvZ0VuZCcsICd0cmlnZ2VySW50ZW50J10pKSwge30sIHsKICAgIGluaXRpYWxMb2dnaW5nOiBmdW5jdGlvbiBpbml0aWFsTG9nZ2luZygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9nU3RhcnQoewogICAgICAgIGxvZzogJ3N0YXJ0JywKICAgICAgICBkYXRhOiBEYXRlLm5vdygpCiAgICAgIH0pOwoKICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIHRhcmdldDogZXZlbnQudGFyZ2V0LmlkLAogICAgICAgICAgc2NyZWVuX3BvczogewogICAgICAgICAgICB4OiBldmVudC5jbGllbnRYLAogICAgICAgICAgICB5OiBldmVudC5jbGllbnRZCiAgICAgICAgICB9LAogICAgICAgICAgd2luZG93OiB7CiAgICAgICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBfdGhpcy5sb2dDbGljayh7CiAgICAgICAgICBsb2c6ICdjbGljaycsCiAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubG9nRW5kKHsKICAgICAgICAgIGxvZzogJ2VuZCcsCiAgICAgICAgICB0eXBlOiAnY2xvc2UnLAogICAgICAgICAgZGF0YTogRGF0ZS5ub3coKQogICAgICAgIH0pOwogICAgICB9KTsgLy9jbG9zaW5nIHdpbmRvdwoKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5sb2dFbmQoewogICAgICAgICAgbG9nOiAnZW5kJywKICAgICAgICAgIHR5cGU6ICdyZWZyZXNoJywKICAgICAgICAgIGRhdGE6IERhdGUubm93KCkKICAgICAgICB9KTsKICAgICAgfSk7IC8vcmVmcmVzaGluZyBwYWdlLCBjaGFuZ2luZyBVUkwKICAgIH0sCiAgICAvLyBnZXROdW1DbGlja3MoKXsKICAgIC8vICAgICByZXR1cm4gdGhpcy5nZXRMb2dDbGlja3MubGVuZ3RoOwogICAgLy8gfSwKICAgIGNvbm5lY3Q6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF9zdG9yZSA9IHRoaXMuJHN0b3JlOwogICAgICB0aGlzLmxvZ1NvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy51cmwpOwoKICAgICAgX3N0b3JlLmRpc3BhdGNoKCdzZXRMb2dTb2NrZXQnLCB0aGlzLmxvZ1NvY2tldCk7CgogICAgICB0aGlzLmxvZ1NvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2xvZyBjb25uZWN0aW9uIG9wZW5lZCBhdCAnLCBfdGhpczIudXJsKTsKCiAgICAgICAgX3RoaXMyLmluaXRpYWxMb2dnaW5nKCk7CiAgICAgIH07CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/Logging.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<!--\n    <li class=\"nav-item dropdown\">\n        <button type='button' class='btn btn-primary dropdown-toggle' id='achievements-button' data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" class=\"bi bi-file-earmark-bar-graph\" viewBox=\"0 0 16 16\">\n                <path d=\"M10 13.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v6zm-2.5.5a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1zm-3 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-1z\"/>\n                <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z\"/>\n            </svg>\n            <span v-if='getLoggingUpdated' class=\"spinner-grow spinner-grow-sm text-danger position-absolute top-10 start-80 translate-middle\" role=\"status\" aria-hidden=\"true\"></span>\n        </button>\n        \n        <ul class=\"dropdown-menu dropdown-menu-dark\" aria-labelledby=\"navbarDropdown2\">\n            <li><h4 class='text-muted text-center'>Logging</h4></li>\n            <li><p>Number of clicks: {{ getNumClicks() }}</p></li>\n        </ul>\n    </li>\n-->\n<div id='logging'>\n\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { mapActions } from 'vuex';\n\nexport default {\n    name: 'Logging',\n    props: {\n        url: String,   \n    },\n    data () {\n        return {\n            logSocket: null,\n        }\n    },\n    mounted(){\n        \n        \n    },\n    watch:{\n        url(){\n\t\t\ttry{\n\t\t\t\tif(this.url != '' && this.getLogURLObtained){\n\t\t\t\t\tthis.connect();\t\t\t\t\t\t\t\t\n\t\t\t\t} else{\n\t\t\t\t\tconsole.log('disconnecting: ' + this.url);\n\t\t\t\t}\n\t\t\t} catch(e){\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t},\n        getSessionExpired(expired){\n            if(expired){\n                this.logEnd({log:'end', type:'session-exp', data: Date.now()});\n            }\n        }\n    },\n    computed:{\n        ...mapGetters([\n            'getLogURLObtained',\n            'getLogStart',\n            //'getLogClicks',\n            //'getLogParameters',\n            'getLogTotalTime',\n            'getPromptByName',\n            'getPrompts',\n            'getAchievementByName',\n            'getLogConsent',\n            'getSurveyConsent',\n            'getSessionExpired',\n            \n        ]),\n\n    },\n    methods:{\n        ...mapActions([\n            'logClick',\n            'logStart',\n            'logEnd',\n            'triggerIntent'\n        ]),\n        initialLogging(){\n            this.logStart({log:'start', data: Date.now()});\n\n            window.onclick = (event) => {\n                let data = {target: event.target.id, screen_pos: {x: event.clientX, y: event.clientY}, window: {width: window.innerWidth, height: window.innerHeight}}\n                this.logClick({log:'click', data:data});\n            }\n\n            window.addEventListener('pagehide', () => {this.logEnd({log:'end', type:'close', data: Date.now()})});\t\t\t\t//closing window\n            window.addEventListener('beforeunload', () => {this.logEnd({log:'end', type:'refresh', data: Date.now()})});\t\t\t//refreshing page, changing URL\n        },\n        // getNumClicks(){\n        //     return this.getLogClicks.length;\n        // },\n        connect(){\n            let _store = this.$store;\n\n\t\t\tthis.logSocket = new WebSocket(this.url);\n\t\t\t_store.dispatch('setLogSocket', this.logSocket);\n            \n            this.logSocket.onopen = () => {\n\t\t\t\tconsole.log('log connection opened at ', this.url);\n                this.initialLogging();\n\t\t\t};\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":""}]}