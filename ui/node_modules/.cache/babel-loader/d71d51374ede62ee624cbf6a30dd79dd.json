{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js!/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/Logging.vue?vue&type=template&id=b63e5d9a","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/Logging.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrIH0gZnJvbSAidnVlIjsKdmFyIF9ob2lzdGVkXzEgPSB7CiAgaWQ6ICJsb2dnaW5nIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEpOwp9"},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/Logging.vue"],"names":[],"mappings":";;AAiBK,EAAA,EAAE,EAAC;;;uBAAR,mBAAA,CAEM,KAFN,EAAA,UAAA,C","sourcesContent":["<template>\n<!--\n    <li class=\"nav-item dropdown\">\n        <button type='button' class='btn btn-primary dropdown-toggle' id='achievements-button' data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" class=\"bi bi-file-earmark-bar-graph\" viewBox=\"0 0 16 16\">\n                <path d=\"M10 13.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v6zm-2.5.5a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1zm-3 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-1z\"/>\n                <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z\"/>\n            </svg>\n            <span v-if='getLoggingUpdated' class=\"spinner-grow spinner-grow-sm text-danger position-absolute top-10 start-80 translate-middle\" role=\"status\" aria-hidden=\"true\"></span>\n        </button>\n        \n        <ul class=\"dropdown-menu dropdown-menu-dark\" aria-labelledby=\"navbarDropdown2\">\n            <li><h4 class='text-muted text-center'>Logging</h4></li>\n            <li><p>Number of clicks: {{ getNumClicks() }}</p></li>\n        </ul>\n    </li>\n-->\n<div id='logging'>\n\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { mapActions } from 'vuex';\n\nexport default {\n    name: 'Logging',\n    props: {\n        url: String,   \n    },\n    data () {\n        return {\n            logSocket: null,\n        }\n    },\n    mounted(){\n        \n        \n    },\n    watch:{\n        url(){\n\t\t\ttry{\n\t\t\t\tif(this.url != '' && this.getLogURLObtained){\n\t\t\t\t\tthis.connect();\t\t\t\t\t\t\t\t\n\t\t\t\t} else{\n\t\t\t\t\tconsole.log('disconnecting: ' + this.url);\n\t\t\t\t}\n\t\t\t} catch(e){\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t},\n        getSessionExpired(expired){\n            if(expired){\n                this.logEnd({log:'end', type:'session-exp', data: Date.now()});\n            }\n        }\n    },\n    computed:{\n        ...mapGetters([\n            'getLogURLObtained',\n            'getLogStart',\n            //'getLogClicks',\n            //'getLogParameters',\n            'getLogTotalTime',\n            'getPromptByName',\n            'getPrompts',\n            'getAchievementByName',\n            'getLogConsent',\n            'getSurveyConsent',\n            'getSessionExpired',\n            \n        ]),\n\n    },\n    methods:{\n        ...mapActions([\n            'logClick',\n            'logStart',\n            'logEnd',\n            'triggerIntent'\n        ]),\n        initialLogging(){\n            this.logStart({log:'start', data: Date.now()});\n\n            window.onclick = (event) => {\n                let data = {target: event.target.id, screen_pos: {x: event.clientX, y: event.clientY}, window: {width: window.innerWidth, height: window.innerHeight}}\n                this.logClick({log:'click', data:data});\n            }\n\n            window.addEventListener('pagehide', () => {this.logEnd({log:'end', type:'close', data: Date.now()})});\t\t\t\t//closing window\n            window.addEventListener('beforeunload', () => {this.logEnd({log:'end', type:'refresh', data: Date.now()})});\t\t\t//refreshing page, changing URL\n        },\n        // getNumClicks(){\n        //     return this.getLogClicks.length;\n        // },\n        connect(){\n            let _store = this.$store;\n\n\t\t\tthis.logSocket = new WebSocket(this.url);\n\t\t\t_store.dispatch('setLogSocket', this.logSocket);\n            \n            this.logSocket.onopen = () => {\n\t\t\t\tconsole.log('log connection opened at ', this.url);\n                this.initialLogging();\n\t\t\t};\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":""}]}