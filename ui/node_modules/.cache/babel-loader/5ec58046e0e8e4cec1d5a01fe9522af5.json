{"remainingRequest":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js!/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/spinner-amax/ui/src/components/DataStream.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/david/spinner-amax/ui/src/components/DataStream.vue","mtime":1653472124341},{"path":"/home/david/spinner-amax/ui/babel.config.js","mtime":1653472124337},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/david/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvZGF2aWQvc3Bpbm5lci1hbWF4L3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IENvbnRyb2xQYW5lbFNwaW5uaW5nRGlzayBmcm9tICIuL0NvbnRyb2xQYW5lbFNwaW5uaW5nRGlzay52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGF0YVN0cmVhbSIsCiAgY29tcG9uZW50czogewogICAgQ29udHJvbFBhbmVsU3Bpbm5pbmdEaXNrOiBDb250cm9sUGFuZWxTcGlubmluZ0Rpc2sKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHJlYW06IE9iamVjdAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyB2YXIgX3RoaXMgPSB0aGlzOwogICAgLy8gdmFyIHJlY29ubmVjdCA9IGZ1bmN0aW9uKCkgewogICAgLy8gCWNvbnNvbGUubG9nKCdyZWNvbm5lY3QgcnVubmluZycpOwogICAgLy8gCV90aGlzLmdldFdlYnNvY2tldENvbm5lY3Rpb24oKTsKICAgIC8vIH07CiAgICAvL21ha2Ugc2Vjb25kIGFuZCBzdWJzZXF1ZW50IGNvbm5lY3Rpb25zCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzdHJlYW1zOmRyb3BwZWQiLCB0aGlzLmdldFdlYnNvY2tldENvbm5lY3Rpb24pOwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyh7CiAgICB1cmxPSzogJ2dldERhdGFVUkxPYnRhaW5lZCcsCiAgICB1cmw6ICdnZXREYXRhVVJMJywKICAgIHZlcnNpb246ICdnZXRSZW1vdGVMYWJWZXJzaW9uJwogIH0pKSwge30sIHsKICAgIHN0cmVhbU9LOiBmdW5jdGlvbiBzdHJlYW1PSygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U3RyZWFtKCJkYXRhIik7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIHN0cmVhbU9LOiBmdW5jdGlvbiBzdHJlYW1PSyhpcykgewogICAgICBpZiAoaXMpIHsKICAgICAgICB0aGlzLmdldFdlYnNvY2tldENvbm5lY3Rpb24oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygibm8gc3RyZWFtIik7CiAgICAgIH0KICAgIH0sCiAgICB1cmxPSzogZnVuY3Rpb24gdXJsT0soaXMpIHsKICAgICAgaWYgKGlzKSB7CiAgICAgICAgY29uc29sZS5sb2coImdldCBkYXRhVVJMIiwgdGhpcy51cmxPSywgdGhpcy51cmwpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRXZWJzb2NrZXRDb25uZWN0aW9uOiBmdW5jdGlvbiBnZXRXZWJzb2NrZXRDb25uZWN0aW9uKCkgewogICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U3RyZWFtKCJkYXRhIik7CiAgICAgIHZhciBhY2Nlc3NVUkwgPSB0aGlzLnN0cmVhbS51cmw7CiAgICAgIHZhciB0b2tlbiA9IHRoaXMuc3RyZWFtLnRva2VuOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkZWxldGVEYXRhVVJMIik7CiAgICAgIGF4aW9zLnBvc3QoYWNjZXNzVVJMLCB7fSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IHRva2VuCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgic2V0RGF0YVVSTCIsIHJlc3BvbnNlLmRhdGEudXJpKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/david/spinner-amax/ui/src/components/DataStream.vue"],"names":[],"mappings":";AAWA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,wBAAP,MAAqC,gCAArC;AACA,SAAS,UAAT,QAA2B,MAA3B;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,YADQ;AAEd,EAAA,UAAU,EAAC;AACJ,IAAA,wBAAwB,EAAxB;AADI,GAFG;AAKX,EAAA,IALW,kBAKL;AACF,WAAM;AACX,MAAA,MAAM,EAAE;AADG,KAAN;AAGH,GATU;AAUd,EAAA,OAVc,qBAUL;AACR;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B,EAA6C,KAAK,sBAAlD;AACA,GAlBa;AAmBX,EAAA,QAAQ,kCACP,UAAU,CAAC;AACb,IAAA,KAAK,EAAE,oBADM;AAEb,IAAA,GAAG,EAAE,YAFQ;AAGb,IAAA,OAAO,EAAE;AAHI,GAAD,CADH;AAMV,IAAA,QANU,sBAMA;AACT,aAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,MAA9B,CAAP;AACA;AARS,IAnBG;AA8Bd,EAAA,KAAK,EAAC;AACL,IAAA,QAAQ,EAAE,kBAAS,EAAT,EAAa;AACtB,UAAI,EAAJ,EAAQ;AACP,aAAK,sBAAL;AACD,OAFA,MAEO;AACN,QAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AACD;AACA,KAPI;AAQL,IAAA,KARK,iBAQC,EARD,EAQK;AACT,UAAI,EAAJ,EAAQ;AACP,QAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,KAAK,KAAhC,EAAuC,KAAK,GAA5C;AACD;AACA;AAZI,GA9BQ;AA6Cd,EAAA,OAAO,EAAC;AACP,IAAA,sBADO,oCACiB;AACvB,WAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB,CAA8B,MAA9B,CAAd;AACA,UAAI,SAAQ,GAAI,KAAK,MAAL,CAAY,GAA5B;AACA,UAAI,KAAI,GAAI,KAAK,MAAL,CAAY,KAAxB;;AACA,UAAI,KAAI,GAAI,IAAZ;;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,eAArB;AACA,MAAA,KAAI,CACH,IADD,CACM,SADN,EACiB,EADjB,EACqB;AAAE,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE;AAAjB;AAAX,OADrB,EAEC,IAFD,CAEM,UAAC,QAAD,EAAc;AACnB,QAAA,KAAK,CAAC,MAAN,CAAa,QAAb,CAAsB,YAAtB,EAAoC,QAAQ,CAAC,IAAT,CAAc,GAAlD;AACA,OAJD,EAKC,KALD,CAKO,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OALP;AAMD;AAbO;AA7CM,CAAf","sourcesContent":["//vue3 update\n\n<template>\n\n    <div v-if='version == \"spinning_disk\"'>\n\t\t<control-panel-spinning-disk :url=\"url\"/>\n\t</div>\n\n</template>\n\n<script>\nimport axios from \"axios\";\nimport ControlPanelSpinningDisk from \"./ControlPanelSpinningDisk.vue\";\nimport { mapGetters } from 'vuex';\n\nexport default {\n\tname: \"DataStream\",\n\tcomponents:{\n        ControlPanelSpinningDisk,\n\t},\n    data(){\n        return{\n\t\t\tstream: Object,\n        }\n    },\n\tmounted(){\n\t\t// var _this = this;\n\t\t// var reconnect = function() {\n\t\t// \tconsole.log('reconnect running');\n\t\t// \t_this.getWebsocketConnection();\n\t\t// };\n\t\t//make second and subsequent connections\n\t\tdocument.addEventListener(\"streams:dropped\", this.getWebsocketConnection);\n\t},\n    computed:{\n\t\t...mapGetters({\n\t\t\turlOK: 'getDataURLObtained',\n\t\t\turl: 'getDataURL',\n\t\t\tversion: 'getRemoteLabVersion',\n\t\t}),\n\t\tstreamOK(){\n\t\t\treturn this.$store.getters.getStream(\"data\");\n\t\t},\n\t\t\n\t},\n\twatch:{\n\t\tstreamOK: function(is) {\n\t\t\tif (is) {\n\t\t\t\tthis.getWebsocketConnection();\n\t\t\t} else {\n\t\t\t\tconsole.log(\"no stream\");\n\t\t\t}\n\t\t},\n\t\turlOK(is) {\n\t\t\tif (is) {\n\t\t\t\tconsole.log(\"get dataURL\", this.urlOK, this.url);\n\t\t\t}\n\t\t},\n\n\t},\n\tmethods:{\n\t\tgetWebsocketConnection(){\n\t\t\tthis.stream = this.$store.getters.getStream(\"data\");\n\t\t\tvar accessURL = this.stream.url;\n\t\t\tvar token = this.stream.token;\n\t\t\tlet _this = this;\n\t\t\tthis.$store.dispatch(\"deleteDataURL\");\t\t\n\t\t\taxios\n\t\t\t.post(accessURL, {}, { headers: { Authorization: token } })\n\t\t\t.then((response) => {\n\t\t\t\t_this.$store.dispatch(\"setDataURL\", response.data.uri);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t\t}\n\t},\n\t\n\t\n}\n\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}]}