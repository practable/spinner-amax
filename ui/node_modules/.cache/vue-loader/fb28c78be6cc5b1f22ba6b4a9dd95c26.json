{"remainingRequest":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/david/practable/spinner-amax/ui/src/components/DataRecorder.vue?vue&type=style&index=0&id=61b87a90&scoped=true&lang=css","dependencies":[{"path":"/home/david/practable/spinner-amax/ui/src/components/DataRecorder.vue","mtime":1653472124341},{"path":"/home/david/practable/spinner-amax/ui/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/david/practable/spinner-amax/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgouZXJyb3J7CiAgICBib3JkZXI6dGhpY2sgc29saWQgcmVkCn0KCi5lcnJvcjpmb2N1c3sKICAgIGJvcmRlcjp0aGljayBzb2xpZCByZWQKfQoKI3JlY29yZEJ1dHRvbiAgICAgICB7YmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDI1NSwgOCk7fQojcmVjb3JkQnV0dG9uOmhvdmVyIHtiYWNrZ3JvdW5kLWNvbG9yOiAjM2U4ZTQxfSAKCiNzdG9wQnV0dG9uICAgICAgIHtiYWNrZ3JvdW5kLWNvbG9yOiAjZTEzMTMxZmY7fQojc3RvcEJ1dHRvbjpob3ZlciB7YmFja2dyb3VuZC1jb2xvcjogI2NjMWUxZWZmO30KCiNjbGVhckJ1dHRvbiAge2JhY2tncm91bmQtY29sb3I6ICNlMTdhMzFmZjt9CiNjbGVhckJ1dHRvbjpob3ZlciAge2JhY2tncm91bmQtY29sb3I6ICNjYzY2MWVmZjt9Cgojb3V0cHV0QnV0dG9uICAgICAgICB7YmFja2dyb3VuZC1jb2xvcjogI2UxYjEzMWZmO30KI291dHB1dEJ1dHRvbjpob3ZlciAge2JhY2tncm91bmQtY29sb3I6ICNjYzlkMWVmZjt9CgoubW9kYWwtc2hvd3sKICBkaXNwbGF5OiBibG9jazsKfQoK"},{"version":3,"sources":["/home/david/practable/spinner-amax/ui/src/components/DataRecorder.vue"],"names":[],"mappings":"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","file":"/home/david/practable/spinner-amax/ui/src/components/DataRecorder.vue","sourceRoot":"","sourcesContent":["//Vue3 updated\n//Streamlined data to not include alternative units\n\n<template>\n<div class='m-2 p-2 bg-white border rounded'>\n    <div class=\"d-grid gap-2 d-sm-block\">\n        <button type='button' class=\"btn btn-sm\" v-if=\"!getIsRecording && getInputMode == 'free'\" id=\"recordButton\" @click='$store.dispatch(\"setIsRecording\", true)'>Record</button>\n        <button type='button' class=\"btn btn-sm\" v-if=\"getIsRecording\" id=\"stopButton\" @click='$store.dispatch(\"setIsRecording\", false)'>Stop</button>\n        <button type='button' class=\"btn btn-sm\" id=\"clearButton\" @click=\"toggleResetModal\">Reset</button>\n        <button type='button' class=\"btn btn-sm\" v-if=\"hasData\" id=\"outputButton\" @click=\"outputToCSV\">Download CSV</button>\n    </div>\n    <div class='row m-2 justify-content-center'>\n      <div v-if='getIsRecording' class='col-2'>\n        <img id='red-light' src='../../public/images/red-light.png' width='20' height='20' :hidden='!showRedLight'>\n      </div>\n      <div class='col-10'>  \n        <p class='m-1'>Recorded: {{getNumData}}/{{getMaxDataPoints}} data points</p>\n      </div>\n    </div>\n\n  <transition name='fade'>\n    <div v-if='showResetConfirmModal' class=\"modal modal-show\" tabindex=\"-1\" role=\"dialog\">\n        <div class=\"modal-dialog\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\">Reset Data</h5>\n              <button type=\"button\" class=\"btn btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click='toggleResetModal'>\n                \n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <p>Are you sure you want to Reset? This will clear all stored data.</p>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-primary\" id='resetmodalclear' @click=\"clearData(); toggleResetModal();\">Reset</button>\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\" data-bs-dismiss=\"modal\" @click=\"toggleResetModal\">Cancel</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n\n  name: 'DataRecorder',\n  props:{\n\t\n\t},\n  data () {\n    return {\n        stopped_recording: false,\n        showResetConfirmModal: false,\n    }\n  },\n  components: {\n    \n  },\n  created(){\n    \n\t},\n  computed:{\n    ...mapGetters([\n        'getIsRecording',\n        'getCurrentTime',\n        'getInputMode',\n        'getNumData',\n        //'getCurrentAngle',\n        //'getCurrentAngularVelocity',\n        'getMaxDataPoints',\n        'getCurrentAngleArray',\n        'getCurrentAngularVelocityArray',\n        'getCurrentTimeArray',\n        'getTimeArray',\n        'getCommandArray',\n        'getDriveArray',\n        'getErrorArray'\n        \n    ]),\n      hasData(){\n          return this.getNumData !== 0;\n      },\n      showRedLight(){\n        return this.getNumData % 100 > 50 ? true : false;\n      }\n  },\n  watch:{\n    getIsRecording(now, prev){\n        if(prev && !now){\n          this.stopRecording();\n        } else if(now){\n          this.record();\n        }\n    },\n    getCurrentTime(){\n      if(this.getIsRecording && this.getNumData < this.getMaxDataPoints){\n        this.plot();\n      } else if(this.getNumData == this.getMaxDataPoints && !this.stopped_recording){\n          this.stopRecording();\n          this.stopped_recording = true;\n      }\n    },\n  },\n  methods: {\n      record(){\n          this.$store.dispatch('setStartTime', this.getCurrentTimeArray[0]);\n      },\n      stopRecording(){\n        console.log('data recording stopped');\n      },\n      // plot(){\n      //     let angle = parseFloat(this.getCurrentAngle); //rad\n      //     let time = this.$store.getters.getTime;       //s\n      //     let ang_vel = parseFloat(this.getCurrentAngularVelocity);  //rad/s\n      //     let command = this.$store.getters.getCommand;\n      //     let drive = this.$store.getters.getDrive;\n      //     let error = this.$store.getters.getError;\n\n      //     let data_object = {id: this.getNumData, t: parseFloat(time), theta: angle.toFixed(2), omega: ang_vel.toFixed(2), command: command, drive: drive, error: error, showDataPoint: true};\n      //     this.$store.dispatch('addData', data_object);\n          \n\n      // },\n      plot(){\n          let angles = this.getCurrentAngleArray; //rad\n          let times = this.getTimeArray;       //s\n          let ang_vels = this.getCurrentAngularVelocityArray;  //rad/s\n          let commands = this.getCommandArray;\n          let drives = this.getDriveArray;\n          let errors = this.getErrorArray;\n\n          angles.forEach((angle, index) => {\n              let data_object = {id: this.getNumData, t: parseFloat(times[index]), theta: angle.toFixed(2), omega: ang_vels[index].toFixed(2), command: commands[index], drive: drives[index], error: errors[index]};\n              this.$store.dispatch('addData', data_object);\n          })\n          \n\n      },\n      clearData(){\n          this.$store.dispatch('clearAllData');\n          \n          if(this.$store.getters.getPromptByName('download_data').count < 1){\n            this.$store.dispatch('showPrompt', 'download_data');\n          }\n      },\n      toggleResetModal(){\n          this.showResetConfirmModal = !this.showResetConfirmModal;\n      },\n      outputToCSV(){\n\n        if(this.getNumData > 100){\n          this.$store.dispatch('setAchievementCompleted', 'download-data');\n          \n          if(this.$store.getters.getPromptByName('graph_functions').count < 1){\n            this.$store.dispatch('showPrompt', 'graph_functions');\n          }\n          if((this.$store.getters.getPromptByName('control_experiment').count == 0 && this.$store.getters.getLogTotalTime > 1800000) || (this.$store.getters.getPromptByName('control_experiment').count == 1 && this.$store.getters.getLogTotalTime > 3600000)){\n            this.$store.dispatch('showPrompt', 'control_experiment');\n          } \n          if((this.$store.getters.getPromptByName('control_hardware').count == 0 && this.$store.getters.getLogTotalTime > 1200000) || (this.$store.getters.getPromptByName('control_hardware').count == 1 && this.$store.getters.getLogTotalTime > 2400000)){\n            this.$store.dispatch('showPrompt', 'control_hardware');\n          }\n\n          if((this.$store.getters.getPromptByName('ueq_attractiveness').count == 0 && this.$store.getters.getLogTotalTime > 1800000) || (this.$store.getters.getPromptByName('ueq_attractiveness').count == 1 && this.$store.getters.getLogTotalTime > 3600000)){\n            this.$store.dispatch('showPrompt', 'ueq_attractiveness');\n          }\n\n          if((this.$store.getters.getPromptByName('ueq_dependability').count == 0 && this.$store.getters.getLogTotalTime > 1800000) || (this.$store.getters.getPromptByName('ueq_dependability').count == 1 && this.$store.getters.getLogTotalTime > 3600000)){\n            this.$store.dispatch('showPrompt', 'ueq_dependability');\n          }\n\n          if((this.$store.getters.getPromptByName('ueq_efficiency').count == 0 && this.$store.getters.getLogTotalTime > 1800000) || (this.$store.getters.getPromptByName('ueq_efficiency').count == 1 && this.$store.getters.getLogTotalTime > 3600000)){\n            this.$store.dispatch('showPrompt', 'ueq_efficiency');\n          }\n\n          if((this.$store.getters.getPromptByName('ueq_perspicuity').count == 0 && this.$store.getters.getLogTotalTime > 1800000) || (this.$store.getters.getPromptByName('ueq_perspicuity').count == 1 && this.$store.getters.getLogTotalTime > 3600000)){\n            this.$store.dispatch('showPrompt', 'ueq_perspicuity');\n          }\n          \n        }\n\n\n          let csv = '';\n          let filename = '';\n            let date = new Date();\n            filename = date.getDate().toString() + (date.getMonth() + 1).toString() + date.getFullYear().toString();\n              csv = 'Time/s,Angle/rad,AngVel/rad/s,Command,Drive,Error\\n';\n            let data = this.$store.getters.getData;\n            data.forEach(function(d){\n                csv += d.t.toString();\n                csv += \",\";\n                csv += d.theta.toString();\n                csv += ',';\n                csv += d.omega.toString();\n                if(d.command != null){\n                  csv += \",\";\n                  csv += d.command.toString();\n                } else {\n                  csv += \",\";\n                  csv += \"\";\n                }\n                if(d.drive != null){\n                  csv += \",\";\n                  csv += d.drive.toString();\n                } else{\n                  csv += \",\";\n                  csv += \"\";\n                }\n\n                if(d.error != null){\n                  csv += \",\";\n                  csv += d.error.toString();\n                } else{\n                  csv += \",\";\n                  csv += \"\";\n                }    \n                \n                csv += \"\\n\";\n            });\n          \n            filename += '.csv';\n         \n          let hiddenElement = document.createElement('a');\n          hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);\n          hiddenElement.target = '_blank';\n          hiddenElement.download = filename;\n          hiddenElement.click();\n      },\n      \n  }\n}\n</script>\n\n<style scoped>\n\n.error{\n    border:thick solid red\n}\n\n.error:focus{\n    border:thick solid red\n}\n\n#recordButton       {background-color: rgb(0, 255, 8);}\n#recordButton:hover {background-color: #3e8e41} \n\n#stopButton       {background-color: #e13131ff;}\n#stopButton:hover {background-color: #cc1e1eff;}\n\n#clearButton  {background-color: #e17a31ff;}\n#clearButton:hover  {background-color: #cc661eff;}\n\n#outputButton        {background-color: #e1b131ff;}\n#outputButton:hover  {background-color: #cc9d1eff;}\n\n.modal-show{\n  display: block;\n}\n\n</style>"]}]}